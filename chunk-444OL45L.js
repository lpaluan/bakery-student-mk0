import{b as ho,c as fo,f as Dc,g as po}from"./chunk-LJ5XHLMQ.js";import{$ as bi,$a as Ir,$b as Zi,Aa as Xe,Ac as uo,B as Bn,Ba as Ye,C as Ke,Ca as Oi,Da as Ii,E as At,Ea as ki,F as be,Fa as xi,G as zn,Ga as Pi,H as vi,Ha as Di,Ia as Mi,J as yi,Ja as Pe,Ma as ji,N as wi,O as H,Oa as xt,P as qn,Qa as Ni,R as M,Ra as Ui,S as A,Sa as Ze,Ta as Li,U as T,Ua as $i,V as Ot,Va as Fi,Vb as Ki,W as _i,X as x,Xa as Bi,Xb as Xi,Y as E,Ya as Or,Z as m,Za as zi,_ as Er,_a as Pt,_b as Yi,a as di,aa as Re,b as fi,ba as ee,c as Un,cb as qi,cc as es,d as Ln,db as Qe,dc as Qi,e as $n,eb as ne,ec as kr,f as fe,fa as It,fb as Hi,g as W,ga as L,gb as Xn,ha as Hn,hb as Vi,i as pe,ia as Vn,ib as Yn,ic as eo,j as U,ja as Cr,jb as Zn,jc as Dt,k as y,kb as Qn,kc as to,l as Ct,lb as Gi,lc as ro,m as pi,ma as Ri,mc as no,n as gi,na as Si,nc as Mt,o as C,oa as Ar,oc as so,p as Sr,pa as Gn,pc as et,q as B,qa as Ti,qc as io,r as Fn,ra as Ei,rb as Wi,s as mi,t as Tr,ta as Ci,ua as Wn,ub as Ji,va as Ai,vc as oo,w as Q,wa as kt,wc as ao,xc as co,y as xe,ya as Jn,z as ge,za as Kn,zc as lo}from"./chunk-3TWEQWT2.js";import{a as g,b as q,d as de,f as xc,g as Pc,h}from"./chunk-FK42CRUA.js";var Gs=de(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});var Hs=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Vs.default=Hs});var Js=de(ir=>{"use strict";var xa=ir&&ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ir,"__esModule",{value:!0});var Ju=xa((po(),Pc(Dc))),Ku=xa(Gs()),Ws=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ju.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>h(this,null,function*(){var o,a,c;let l=null,u=null,d=null,p=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){let k=yield i.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=k:u=JSON.parse(k))}let S=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");S&&w&&w.length>1&&(d=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,p=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let S=yield i.text();try{l=JSON.parse(S),Array.isArray(l)&&i.status===404&&(u=[],l=null,p=200,f="OK")}catch{i.status===404&&S===""?(p=204,f="No Content"):l={message:S}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,f="OK"),l&&this.shouldThrowOnError)throw new Ku.default(l)}return{error:l,data:u,count:d,status:p,statusText:f}}));return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:`${(a=i?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}};ir.default=Ws});var Xs=de(or=>{"use strict";var Xu=or&&or.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(or,"__esModule",{value:!0});var Yu=Xu(Js()),Ks=class extends Yu.default{select(t){let e=!1,r=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){let o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:s=r}={}){let i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;let c=[t?"analyze":null,e?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};or.default=Ks});var gn=de(ar=>{"use strict";var Zu=ar&&ar.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ar,"__esModule",{value:!0});var Qu=Zu(Xs()),Ys=class extends Qu.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};ar.default=Ys});var Qs=de(lr=>{"use strict";var eh=lr&&lr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(lr,"__esModule",{value:!0});var cr=eh(gn()),Zs=class{constructor(t,{headers:e={},schema:r,fetch:s}){this.url=t,this.headers=e,this.schema=r,this.fetch=s}select(t,{head:e=!1,count:r}={}){let s=e?"HEAD":"GET",i=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new cr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){let o=t.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new cr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let c=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){let l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new cr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),this.headers.Prefer=s.join(","),new cr.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new cr.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};lr.default=Zs});var Pa=de(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.version=void 0;mn.version="0.0.0-automated"});var Da=de(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.DEFAULT_HEADERS=void 0;var th=Pa();vn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${th.version}`}});var ja=de(ur=>{"use strict";var Ma=ur&&ur.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ur,"__esModule",{value:!0});var rh=Ma(Qs()),nh=Ma(gn()),sh=Da(),ei=class n{constructor(t,{headers:e={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},sh.DEFAULT_HEADERS),e),this.schemaName=r,this.fetch=s}from(t){let e=new URL(`${this.url}/${t}`);return new rh.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new n(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:s=!1,count:i}={}){let o,a=new URL(`${this.url}/rpc/${t}`),c;r||s?(o=r?"HEAD":"GET",Object.entries(e).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=e);let l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new nh.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};ur.default=ei});var za=de(j=>{"use strict";var gt=j&&j.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(j,"__esModule",{value:!0});j.PostgrestError=j.PostgrestBuilder=j.PostgrestTransformBuilder=j.PostgrestFilterBuilder=j.PostgrestQueryBuilder=j.PostgrestClient=void 0;var Na=gt(ja());j.PostgrestClient=Na.default;var Ua=gt(Qs());j.PostgrestQueryBuilder=Ua.default;var La=gt(gn());j.PostgrestFilterBuilder=La.default;var $a=gt(Xs());j.PostgrestTransformBuilder=$a.default;var Fa=gt(Js());j.PostgrestBuilder=Fa.default;var Ba=gt(Gs());j.PostgrestError=Ba.default;j.default={PostgrestClient:Na.default,PostgrestQueryBuilder:Ua.default,PostgrestFilterBuilder:La.default,PostgrestTransformBuilder:$a.default,PostgrestBuilder:Fa.default,PostgrestError:Ba.default}});var Dr=new x(""),ss=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,s,i){return this._findPluginFor(r).addEventListener(e,r,s,i)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new A(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(E(Dr),E(ne))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),jt=class{_doc;constructor(t){this._doc=t}manager},xr="ng-app-id";function go(n){for(let t of n)t.remove()}function mo(n,t){let e=t.createElement("style");return e.textContent=n,e}function Mc(n,t,e,r){let s=n.head?.querySelectorAll(`style[${xr}="${t}"],link[${xr}="${t}"]`);if(s)for(let i of s)i.removeAttribute(xr),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&e.set(i.textContent,{usage:0,elements:[i]})}function rs(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var is=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,s,i={}){this.doc=e,this.appId=r,this.nonce=s,this.isServer=lo(i),Mc(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let s of e)this.addUsage(s,this.inline,mo);r?.forEach(s=>this.addUsage(s,this.external,rs))}removeStyles(e,r){for(let s of e)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(e,r,s){let i=r.get(e);i?i.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(e,this.doc)))})}removeUsage(e,r){let s=r.get(e);s&&(s.usage--,s.usage<=0&&(go(s.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])go(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:s}]of this.inline)s.push(this.addElement(e,mo(r,this.doc)));for(let[r,{elements:s}]of this.external)s.push(this.addElement(e,rs(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(xr,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(E(L),E(Wn),E(Jn,8),E(kt))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),ts={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},os=/%COMP%/g;var yo="%COMP%",jc=`_nghost-${yo}`,Nc=`_ngcontent-${yo}`,Uc=!0,Lc=new x("",{providedIn:"root",factory:()=>Uc});function $c(n){return Nc.replace(os,n)}function Fc(n){return jc.replace(os,n)}function wo(n,t){return t.map(e=>e.replace(os,n))}var as=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,s,i,o,a,c,l=null,u=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Nt(e,o,c,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let s=this.getOrCreateRenderer(e,r);return s instanceof Pr?s.applyToHost(e):s instanceof Ut&&s.applyStyles(),s}getOrCreateRenderer(e,r){let s=this.rendererByCompId,i=s.get(r.id);if(!i){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case Kn.Emulated:i=new Pr(c,l,r,this.appId,u,o,a,d,p);break;case Kn.ShadowDom:return new ns(c,l,e,r,o,a,this.nonce,d,p);default:i=new Ut(c,l,r,u,o,a,d,p);break}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(E(ss),E(is),E(Wn),E(Lc),E(L),E(kt),E(ne),E(Jn),E(qi,8))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),Nt=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,s,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=s,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(ts[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(vo(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(vo(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new A(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,s){if(s){e=s+":"+e;let i=ts[s];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let s=ts[r];s?t.removeAttributeNS(s,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,s){s&(xt.DashCase|xt.Important)?t.style.setProperty(e,r,s&xt.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&xt.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,s){if(typeof t=="string"&&(t=Dt().getGlobalEventTarget(this.doc,t),!t))throw new A(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,e,i)),this.eventManager.addEventListener(t,e,i,s)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function vo(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ns=class extends Nt{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,s,i,o,a,c,l){super(t,i,o,c,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=s.styles;u=wo(s.id,u);for(let p of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=p,this.shadowRoot.appendChild(f)}let d=s.getExternalStyles?.();if(d)for(let p of d){let f=rs(p,i);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ut=class extends Nt{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,s,i,o,a,c,l){super(t,i,o,a,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s;let u=r.styles;this.styles=l?wo(l,u):u,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Pr=class extends Ut{contentAttr;hostAttr;constructor(t,e,r,s,i,o,a,c,l){let u=s+"-"+r.id;super(t,e,r,i,o,a,c,l,u),this.contentAttr=$c(u),this.hostAttr=Fc(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var Mr=class n extends ro{supportsDOMEvents=!0;static makeCurrent(){to(new n)}onAndCancel(t,e,r,s){return t.addEventListener(e,r,s),()=>{t.removeEventListener(e,r,s)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=zc();return e==null?null:qc(e)}resetBaseElement(){Lt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return oo(document.cookie,t)}},Lt=null;function zc(){return Lt=Lt||document.head.querySelector("base"),Lt?Lt.getAttribute("href"):null}function qc(n){return new URL(n,document.baseURI).pathname}var Hc=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),bo=(()=>{class n extends jt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,s,i){return e.addEventListener(r,s,i),()=>this.removeEventListener(e,r,s,i)}removeEventListener(e,r,s,i){return e.removeEventListener(r,s,i)}static \u0275fac=function(r){return new(r||n)(E(L))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),_o=["alt","control","meta","shift"],Vc={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Ro=(()=>{class n extends jt{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,s,i){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dt().onAndCancel(e,o.domEventName,a,i))}static parseEventName(e){let r=e.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let i=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),_o.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(e,r){let s=Vc[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(s=e.code,i="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),_o.forEach(o=>{if(o!==s){let a=Gc[o];a(e)&&(i+=o+".")}}),i+=s,i===r)}static eventCallback(e,r,s){return i=>{n.matchEventFullKeyCode(i,e)&&s.runGuarded(()=>r(i))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(E(L))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})();function Wc(n,t){return Qi(g({rootComponent:n},Jc(t)))}function Jc(n){return{appProviders:[...Qc,...n?.providers??[]],platformProviders:Zc}}function Kc(){Mr.makeCurrent()}function Xc(){return new Vn}function Yc(){return Ci(document),document}var Zc=[{provide:kt,useValue:co},{provide:Ai,useValue:Kc,multi:!0},{provide:L,useFactory:Yc}];var Qc=[{provide:bi,useValue:"root"},{provide:Vn,useFactory:Xc},{provide:Dr,useClass:bo,multi:!0,deps:[L]},{provide:Dr,useClass:Ro,multi:!0,deps:[L]},as,is,ss,{provide:Ni,useExisting:as},{provide:ao,useClass:Hc},[]];var ls=class{};var De=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let s=e.slice(0,r),i=e.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let s=(t.op==="a"?this.headers.get(e):void 0)||[];s.push(...r),this.headers.set(e,s);break;case"d":let i=t.value;if(!i)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>i.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var us=class{encodeKey(t){return So(t)}encodeValue(t){return So(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function el(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{let i=s.indexOf("="),[o,a]=i==-1?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,i)),t.decodeValue(s.slice(i+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var tl=/%(\d[a-f0-9])/gi,rl={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function So(n){return encodeURIComponent(n).replace(tl,(t,e)=>rl[e]??t)}function jr(n){return`${n}`}var me=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new us,t.fromString){if(t.fromObject)throw new A(2805,!1);this.map=el(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],s=Array.isArray(r)?r.map(jr):[jr(r)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let s=t[r];Array.isArray(s)?s.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(jr(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],s=r.indexOf(jr(t.value));s!==-1&&r.splice(s,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var hs=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function nl(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function To(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Eo(n){return typeof Blob<"u"&&n instanceof Blob}function Co(n){return typeof FormData<"u"&&n instanceof FormData}function sl(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var il="X-Request-URL",Ao="text/plain",Oo="application/json",vd=`${Oo}, ${Ao}, */*`,rt=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;keepalive=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,s){this.url=e,this.method=t.toUpperCase();let i;if(nl(this.method)||s?(this.body=r!==void 0?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new De,this.context??=new hs,!this.params)this.params=new me,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||To(this.body)||Eo(this.body)||Co(this.body)||sl(this.body)?this.body:this.body instanceof me?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Co(this.body)?null:Eo(this.body)?this.body.type||null:To(this.body)?null:typeof this.body=="string"?Ao:this.body instanceof me?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Oo:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,i=t.keepalive??this.keepalive,o=t.transferCache??this.transferCache,a=t.body!==void 0?t.body:this.body,c=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,d=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((f,v)=>f.set(v,t.setHeaders[v]),u)),t.setParams&&(d=Object.keys(t.setParams).reduce((f,v)=>f.set(v,t.setParams[v]),d)),new n(e,r,a,{params:d,headers:u,context:p,reportProgress:l,responseType:s,withCredentials:c,transferCache:o,keepalive:i})}},fs=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(fs||{}),ds=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new De,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Nr=class n extends ds{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=fs.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};function cs(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive}}var ol=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,s={}){let i;if(e instanceof rt)i=e;else{let c;s.headers instanceof De?c=s.headers:c=new De(s.headers);let l;s.params&&(s.params instanceof me?l=s.params:l=new me({fromObject:s.params})),i=new rt(e,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache,keepalive:s.keepalive})}let o=y(i).pipe(ge(c=>this.handler.handle(c)));if(e instanceof rt||s.observe==="events")return o;let a=o.pipe(Q(c=>c instanceof Nr));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(C(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new A(2806,!1);return c.body}));case"blob":return a.pipe(C(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new A(2807,!1);return c.body}));case"text":return a.pipe(C(c=>{if(c.body!==null&&typeof c.body!="string")throw new A(2808,!1);return c.body}));case"json":default:return a.pipe(C(c=>c.body))}case"response":return a;default:throw new A(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new me().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,s={}){return this.request("PATCH",e,cs(s,r))}post(e,r,s={}){return this.request("POST",e,cs(s,r))}put(e,r,s={}){return this.request("PUT",e,cs(s,r))}static \u0275fac=function(r){return new(r||n)(E(ls))};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})();var yd=RegExp(`^${il}:`,"m");var Io=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(E(L))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:function(r){let s=null;return r?s=new(r||n):s=E(ll),s},providedIn:"root"})}return n})(),ll=(()=>{class n extends cl{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case Pe.NONE:return r;case Pe.HTML:return Ye(r,"HTML")?Xe(r):Mi(this._doc,String(r)).toString();case Pe.STYLE:return Ye(r,"Style")?Xe(r):r;case Pe.SCRIPT:if(Ye(r,"Script"))return Xe(r);throw new A(5200,!1);case Pe.URL:return Ye(r,"URL")?Xe(r):Di(String(r));case Pe.RESOURCE_URL:if(Ye(r,"ResourceURL"))return Xe(r);throw new A(5201,!1);default:throw new A(5202,!1)}}bypassSecurityTrustHtml(e){return Oi(e)}bypassSecurityTrustStyle(e){return Ii(e)}bypassSecurityTrustScript(e){return ki(e)}bypassSecurityTrustUrl(e){return xi(e)}bypassSecurityTrustResourceUrl(e){return Pi(e)}static \u0275fac=function(r){return new(r||n)(E(L))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _="primary",Yt=Symbol("RouteTitle"),ys=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Ne(n){return new ys(n)}function Uo(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let s={};for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(o[0]===":")s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function hl(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!se(n[e],t[e]))return!1;return!0}function se(n,t){let e=n?ws(n):void 0,r=t?ws(t):void 0;if(!e||!r||e.length!=r.length)return!1;let s;for(let i=0;i<e.length;i++)if(s=e[i],!Lo(n[s],t[s]))return!1;return!0}function ws(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Lo(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((s,i)=>r[i]===s)}else return n===t}function $o(n){return n.length>0?n[n.length-1]:null}function ve(n){return pi(n)?n:Vi(n)?U(Promise.resolve(n)):y(n)}var dl={exact:Bo,subset:zo},Fo={exact:fl,subset:pl,ignored:()=>!0};function ko(n,t,e){return dl[e.paths](n.root,t.root,e.matrixParams)&&Fo[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function fl(n,t){return se(n,t)}function Bo(n,t,e){if(!Me(n.segments,t.segments)||!$r(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!Bo(n.children[r],t.children[r],e))return!1;return!0}function pl(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Lo(n[e],t[e]))}function zo(n,t,e){return qo(n,t,t.segments,e)}function qo(n,t,e,r){if(n.segments.length>e.length){let s=n.segments.slice(0,e.length);return!(!Me(s,e)||t.hasChildren()||!$r(s,e,r))}else if(n.segments.length===e.length){if(!Me(n.segments,e)||!$r(n.segments,e,r))return!1;for(let s in t.children)if(!n.children[s]||!zo(n.children[s],t.children[s],r))return!1;return!0}else{let s=e.slice(0,n.segments.length),i=e.slice(n.segments.length);return!Me(n.segments,s)||!$r(n.segments,s,r)||!n.children[_]?!1:qo(n.children[_],t,i,r)}}function $r(n,t,e){return t.every((r,s)=>Fo[e](n[s].parameters,r.parameters))}var oe=class{root;queryParams;fragment;_queryParamMap;constructor(t=new O([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ne(this.queryParams),this._queryParamMap}toString(){return vl.serialize(this)}},O=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fr(this)}},Se=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Ne(this.parameters),this._parameterMap}toString(){return Vo(this)}};function gl(n,t){return Me(n,t)&&n.every((e,r)=>se(e.parameters,t[r].parameters))}function Me(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function ml(n,t){let e=[];return Object.entries(n.children).forEach(([r,s])=>{r===_&&(e=e.concat(t(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==_&&(e=e.concat(t(s,r)))}),e}var Ue=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>new Te,providedIn:"root"})}return n})(),Te=class{parse(t){let e=new bs(t);return new oe(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${$t(t.root,!0)}`,r=_l(t.queryParams),s=typeof t.fragment=="string"?`#${yl(t.fragment)}`:"";return`${e}${r}${s}`}},vl=new Te;function Fr(n){return n.segments.map(t=>Vo(t)).join("/")}function $t(n,t){if(!n.hasChildren())return Fr(n);if(t){let e=n.children[_]?$t(n.children[_],!1):"",r=[];return Object.entries(n.children).forEach(([s,i])=>{s!==_&&r.push(`${s}:${$t(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=ml(n,(r,s)=>s===_?[$t(n.children[_],!1)]:[`${s}:${$t(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[_]!=null?`${Fr(n)}/${e[0]}`:`${Fr(n)}/(${e.join("//")})`}}function Ho(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ur(n){return Ho(n).replace(/%3B/gi,";")}function yl(n){return encodeURI(n)}function _s(n){return Ho(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Br(n){return decodeURIComponent(n)}function xo(n){return Br(n.replace(/\+/g,"%20"))}function Vo(n){return`${_s(n.path)}${wl(n.parameters)}`}function wl(n){return Object.entries(n).map(([t,e])=>`;${_s(t)}=${_s(e)}`).join("")}function _l(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(s=>`${Ur(e)}=${Ur(s)}`).join("&"):`${Ur(e)}=${Ur(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var bl=/^[^\/()?;#]+/;function ps(n){let t=n.match(bl);return t?t[0]:""}var Rl=/^[^\/()?;=#]+/;function Sl(n){let t=n.match(Rl);return t?t[0]:""}var Tl=/^[^=?&#]+/;function El(n){let t=n.match(Tl);return t?t[0]:""}var Cl=/^[^&#]+/;function Al(n){let t=n.match(Cl);return t?t[0]:""}var bs=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[_]=new O(t,e)),r}parseSegment(){let t=ps(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new A(4009,!1);return this.capture(t),new Se(Br(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Sl(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=ps(this.remaining);s&&(r=s,this.capture(r))}t[Br(e)]=Br(r)}parseQueryParam(t){let e=El(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=Al(this.remaining);o&&(r=o,this.capture(r))}let s=xo(e),i=xo(r);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(i)}else t[s]=i}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ps(this.remaining),s=this.remaining[r.length];if(s!=="/"&&s!==")"&&s!==";")throw new A(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=_);let o=this.parseChildren();e[i]=Object.keys(o).length===1?o[_]:new O([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new A(4011,!1)}};function Go(n){return n.segments.length>0?new O([],{[_]:n}):n}function Wo(n){let t={};for(let[r,s]of Object.entries(n.children)){let i=Wo(s);if(r===_&&i.segments.length===0&&i.hasChildren())for(let[o,a]of Object.entries(i.children))t[o]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let e=new O(n.segments,t);return Ol(e)}function Ol(n){if(n.numberOfChildren===1&&n.children[_]){let t=n.children[_];return new O(n.segments.concat(t.segments),t.children)}return n}function Ee(n){return n instanceof oe}function Jo(n,t,e=null,r=null){let s=Ko(n);return Xo(s,t,e,r)}function Ko(n){let t;function e(i){let o={};for(let c of i.children){let l=e(c);o[c.outlet]=l}let a=new O(i.url,o);return i===n&&(t=a),a}let r=e(n.root),s=Go(r);return t??s}function Xo(n,t,e,r){let s=n;for(;s.parent;)s=s.parent;if(t.length===0)return gs(s,s,s,e,r);let i=Il(t);if(i.toRoot())return gs(s,s,new O([],{}),e,r);let o=kl(i,s,n),a=o.processChildren?Bt(o.segmentGroup,o.index,i.commands):Zo(o.segmentGroup,o.index,i.commands);return gs(s,o.segmentGroup,a,e,r)}function zr(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function qt(n){return typeof n=="object"&&n!=null&&n.outlets}function gs(n,t,e,r,s){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===t?o=e:o=Yo(n,t,e);let a=Go(Wo(o));return new oe(a,i,s)}function Yo(n,t,e){let r={};return Object.entries(n.children).forEach(([s,i])=>{i===t?r[s]=e:r[s]=Yo(i,t,e)}),new O(n.segments,r)}var qr=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&zr(r[0]))throw new A(4003,!1);let s=r.find(qt);if(s&&s!==$o(r))throw new A(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Il(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qr(!0,0,n);let t=0,e=!1,r=n.reduce((s,i,o)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...s,{outlets:a}]}if(i.segmentPath)return[...s,i.segmentPath]}return typeof i!="string"?[...s,i]:o===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,i]},[]);return new qr(e,t,r)}var it=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function kl(n,t,e){if(n.isAbsolute)return new it(t,!0,0);if(!e)return new it(t,!1,NaN);if(e.parent===null)return new it(e,!0,0);let r=zr(n.commands[0])?0:1,s=e.segments.length-1+r;return xl(e,s,n.numberOfDoubleDots)}function xl(n,t,e){let r=n,s=t,i=e;for(;i>s;){if(i-=s,r=r.parent,!r)throw new A(4005,!1);s=r.segments.length}return new it(r,!1,s-i)}function Pl(n){return qt(n[0])?n[0].outlets:{[_]:n}}function Zo(n,t,e){if(n??=new O([],{}),n.segments.length===0&&n.hasChildren())return Bt(n,t,e);let r=Dl(n,t,e),s=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new O(n.segments.slice(0,r.pathIndex),{});return i.children[_]=new O(n.segments.slice(r.pathIndex),n.children),Bt(i,0,s)}else return r.match&&s.length===0?new O(n.segments,{}):r.match&&!n.hasChildren()?Rs(n,t,e):r.match?Bt(n,0,s):Rs(n,t,e)}function Bt(n,t,e){if(e.length===0)return new O(n.segments,{});{let r=Pl(e),s={};if(Object.keys(r).some(i=>i!==_)&&n.children[_]&&n.numberOfChildren===1&&n.children[_].segments.length===0){let i=Bt(n.children[_],t,e);return new O(n.segments,i.children)}return Object.entries(r).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[i]=Zo(n.children[i],t,o))}),Object.entries(n.children).forEach(([i,o])=>{r[i]===void 0&&(s[i]=o)}),new O(n.segments,s)}}function Dl(n,t,e){let r=0,s=t,i={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=e.length)return i;let o=n.segments[s],a=e[r];if(qt(a))break;let c=`${a}`,l=r<e.length-1?e[r+1]:null;if(s>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Do(c,l,o))return i;r+=2}else{if(!Do(c,{},o))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}function Rs(n,t,e){let r=n.segments.slice(0,t),s=0;for(;s<e.length;){let i=e[s];if(qt(i)){let c=Ml(i.outlets);return new O(r,c)}if(s===0&&zr(e[0])){let c=n.segments[t];r.push(new Se(c.path,Po(e[0]))),s++;continue}let o=qt(i)?i.outlets[_]:`${i}`,a=s<e.length-1?e[s+1]:null;o&&a&&zr(a)?(r.push(new Se(o,Po(a))),s+=2):(r.push(new Se(o,{})),s++)}return new O(r,{})}function Ml(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=Rs(new O([],{}),0,r))}),t}function Po(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function Do(n,t,e){return n==e.path&&se(t,e.parameters)}var ot="imperative",D=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(D||{}),G=class{id;url;constructor(t,e){this.id=t,this.url=e}},Ce=class extends G{type=D.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",s=null){super(t,e),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},J=class extends G{urlAfterRedirects;type=D.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}($||{}),ct=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ct||{}),ie=class extends G{reason;code;type=D.NavigationCancel;constructor(t,e,r,s){super(t,e),this.reason=r,this.code=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ae=class extends G{reason;code;type=D.NavigationSkipped;constructor(t,e,r,s){super(t,e),this.reason=r,this.code=s}},lt=class extends G{error;target;type=D.NavigationError;constructor(t,e,r,s){super(t,e),this.error=r,this.target=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ht=class extends G{urlAfterRedirects;state;type=D.RoutesRecognized;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hr=class extends G{urlAfterRedirects;state;type=D.GuardsCheckStart;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vr=class extends G{urlAfterRedirects;state;shouldActivate;type=D.GuardsCheckEnd;constructor(t,e,r,s,i){super(t,e),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gr=class extends G{urlAfterRedirects;state;type=D.ResolveStart;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wr=class extends G{urlAfterRedirects;state;type=D.ResolveEnd;constructor(t,e,r,s){super(t,e),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jr=class{route;type=D.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Kr=class{route;type=D.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xr=class{snapshot;type=D.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yr=class{snapshot;type=D.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zr=class{snapshot;type=D.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qr=class{snapshot;type=D.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ut=class{routerEvent;position;anchor;type=D.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Vt=class{},ht=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function jl(n){return!(n instanceof Vt)&&!(n instanceof ht)}function Nl(n,t){return n.providers&&!n._injector&&(n._injector=Or(n.providers,t,`Route: ${n.path}`)),n._injector??t}function te(n){return n.outlet||_}function Ul(n,t){let e=n.filter(r=>te(r)===t);return e.push(...n.filter(r=>te(r)!==t)),e}function Zt(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var en=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Zt(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Le(this.rootInjector)}},Le=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let s=this.getOrCreateContext(e);s.outlet=r,this.contexts.set(e,s)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new en(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(E(Re))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tn=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Ss(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=Ss(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ts(t,this._root);return e.length<2?[]:e[e.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Ts(t,this._root).map(e=>e.value)}};function Ss(n,t){if(n===t.value)return t;for(let e of t.children){let r=Ss(n,e);if(r)return r}return null}function Ts(n,t){if(n===t.value)return[t];for(let e of t.children){let r=Ts(n,e);if(r.length)return r.unshift(t),r}return[]}var V=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function st(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Gt=class extends tn{snapshot;constructor(t,e){super(t),this.snapshot=e,Ps(this,t)}toString(){return this.snapshot.toString()}};function Qo(n){let t=Ll(n),e=new W([new Se("",{})]),r=new W({}),s=new W({}),i=new W({}),o=new W(""),a=new ce(e,r,i,o,s,_,n,t.root);return a.snapshot=t.root,new Gt(new V(a,[]),t)}function Ll(n){let t={},e={},r={},s="",i=new je([],t,r,s,e,_,n,null,{});return new Wt("",new V(i,[]))}var ce=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,s,i,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=i,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(C(l=>l[Yt]))??y(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=s,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(C(t=>Ne(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(C(t=>Ne(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rn(n,t,e="emptyOnly"){let r,{routeConfig:s}=n;return t!==null&&(e==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:g(g({},t.params),n.params),data:g(g({},t.data),n.data),resolve:g(g(g(g({},n.data),t.data),s?.data),n._resolvedData)}:r={params:g({},n.params),data:g({},n.data),resolve:g(g({},n.data),n._resolvedData??{})},s&&ta(s)&&(r.resolve[Yt]=s.title),r}var je=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Yt]}constructor(t,e,r,s,i,o,a,c,l){this.url=t,this.params=e,this.queryParams=r,this.fragment=s,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ne(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ne(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Wt=class extends tn{url;constructor(t,e){super(e),this.url=t,Ps(this,e)}toString(){return ea(this._root)}};function Ps(n,t){t.value._routerState=n,t.children.forEach(e=>Ps(n,e))}function ea(n){let t=n.children.length>0?` { ${n.children.map(ea).join(", ")} } `:"";return`${n.value}${t}`}function ms(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,se(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),se(t.params,e.params)||n.paramsSubject.next(e.params),hl(t.url,e.url)||n.urlSubject.next(e.url),se(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Es(n,t){let e=se(n.params,t.params)&&gl(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||Es(n.parent,t.parent))}function ta(n){return typeof n.title=="string"||n.title===null}var ra=new x(""),Ds=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=_;activateEvents=new Qe;deactivateEvents=new Qe;attachEvents=new Qe;detachEvents=new Qe;routerOutletData=Zi(void 0);parentContexts=m(Le);location=m($i);changeDetector=m(es);inputBinder=m(Qt,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:s}=e.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new A(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new A(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new A(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new A(4013,!1);this._activatedRoute=e;let s=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Cs(e,a,s.injector,this.routerOutletData);this.activated=s.createComponent(o,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ir({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Ar]})}return n})(),Cs=class{route;childContexts;parent;outletData;constructor(t,e,r,s){this.route=t,this.childContexts=e,this.parent=r,this.outletData=s}get(t,e){return t===ce?this.route:t===Le?this.childContexts:t===ra?this.outletData:this.parent.get(t,e)}},Qt=new x(""),Ms=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,s=Sr([r.queryParams,r.params,r.data]).pipe(H(([i,o,a],c)=>(a=g(g(g({},i),o),a),c===0?y(a):Promise.resolve(a)))).subscribe(i=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let o=eo(r.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(e,s)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})(),js=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=zi({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,s){r&1&&Wi(0,"router-outlet")},dependencies:[Ds],encapsulation:2})}return n})();function Ns(n){let t=n.children&&n.children.map(Ns),e=t?q(g({},n),{children:t}):g({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==_&&(e.component=js),e}function $l(n,t,e){let r=Jt(n,t._root,e?e._root:void 0);return new Gt(r,t)}function Jt(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let s=Fl(n,t,e);return new V(r,s)}else{if(n.shouldAttach(t.value)){let i=n.retrieve(t.value);if(i!==null){let o=i.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Jt(n,a)),o}}let r=Bl(t.value),s=t.children.map(i=>Jt(n,i));return new V(r,s)}}function Fl(n,t,e){return t.children.map(r=>{for(let s of e.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Jt(n,r,s);return Jt(n,r)})}function Bl(n){return new ce(new W(n.url),new W(n.params),new W(n.queryParams),new W(n.fragment),new W(n.data),n.outlet,n.component,n)}var dt=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},na="ngNavigationCancelingError";function nn(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Ee(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=sa(!1,$.Redirect);return s.url=e,s.navigationBehaviorOptions=r,s}function sa(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[na]=!0,e.cancellationCode=t,e}function zl(n){return ia(n)&&Ee(n.url)}function ia(n){return!!n&&n[na]}var ql=(n,t,e,r)=>C(s=>(new As(t,s.targetRouterState,s.currentRouterState,e,r).activate(n),s)),As=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,s,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=i}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),ms(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let s=st(e);t.children.forEach(i=>{let o=i.value.outlet;this.deactivateRoutes(i,s[o],r),delete s[o]}),Object.values(s).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,e,r){let s=t.value,i=e?e.value:null;if(s===i)if(s.component){let o=r.getContext(s.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else i&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),s=r&&t.value.component?r.children:e,i=st(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),s=r&&t.value.component?r.children:e,i=st(t);for(let o of Object.values(i))this.deactivateRouteAndItsChildren(o,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let s=st(e);t.children.forEach(i=>{this.activateRoutes(i,s[i.value.outlet],r),this.forwardEvent(new Qr(i.value.snapshot))}),t.children.length&&this.forwardEvent(new Yr(t.value.snapshot))}activateRoutes(t,e,r){let s=t.value,i=e?e.value:null;if(ms(s),s===i)if(s.component){let o=r.getOrCreateContext(s.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(s.component){let o=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ms(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=s,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},sn=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},at=class{component;route;constructor(t,e){this.component=t,this.route=e}};function Hl(n,t,e){let r=n._root,s=t?t._root:null;return Ft(r,s,e,[r.value])}function Vl(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function pt(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!_i(n)?n:t.get(n):r}function Ft(n,t,e,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=st(t);return n.children.forEach(o=>{Gl(o,i[o.value.outlet],e,r.concat([o.value]),s),delete i[o.value.outlet]}),Object.entries(i).forEach(([o,a])=>zt(a,e.getContext(o),s)),s}function Gl(n,t,e,r,s={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){let c=Wl(o,i,i.routeConfig.runGuardsAndResolvers);c?s.canActivateChecks.push(new sn(r)):(i.data=o.data,i._resolvedData=o._resolvedData),i.component?Ft(n,t,a?a.children:null,r,s):Ft(n,t,e,r,s),c&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new at(a.outlet.component,o))}else o&&zt(t,a,s),s.canActivateChecks.push(new sn(r)),i.component?Ft(n,null,a?a.children:null,r,s):Ft(n,null,e,r,s);return s}function Wl(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Me(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Me(n.url,t.url)||!se(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Es(n,t)||!se(n.queryParams,t.queryParams);case"paramsChange":default:return!Es(n,t)}}function zt(n,t,e){let r=st(n),s=n.value;Object.entries(r).forEach(([i,o])=>{s.component?t?zt(o,t.children.getContext(i),e):zt(o,null,e):zt(o,t,e)}),s.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new at(t.outlet.component,s)):e.canDeactivateChecks.push(new at(null,s)):e.canDeactivateChecks.push(new at(null,s))}function er(n){return typeof n=="function"}function Jl(n){return typeof n=="boolean"}function Kl(n){return n&&er(n.canLoad)}function Xl(n){return n&&er(n.canActivate)}function Yl(n){return n&&er(n.canActivateChild)}function Zl(n){return n&&er(n.canDeactivate)}function Ql(n){return n&&er(n.canMatch)}function oa(n){return n instanceof gi||n?.name==="EmptyError"}var Lr=Symbol("INITIAL_VALUE");function ft(){return H(n=>Sr(n.map(t=>t.pipe(Ke(1),wi(Lr)))).pipe(C(t=>{for(let e of t)if(e!==!0){if(e===Lr)return Lr;if(e===!1||eu(e))return e}return!0}),Q(t=>t!==Lr),Ke(1)))}function eu(n){return Ee(n)||n instanceof dt}function tu(n,t){return B(e=>{let{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=e;return o.length===0&&i.length===0?y(q(g({},e),{guardsResult:!0})):ru(o,r,s,n).pipe(B(a=>a&&Jl(a)?nu(r,i,n,t):y(a)),C(a=>q(g({},e),{guardsResult:a})))})}function ru(n,t,e,r){return U(n).pipe(B(s=>cu(s.component,s.route,e,t,r)),be(s=>s!==!0,!0))}function nu(n,t,e,r){return U(t).pipe(ge(s=>mi(iu(s.route.parent,r),su(s.route,r),au(n,s.path,e),ou(n,s.route,e))),be(s=>s!==!0,!0))}function su(n,t){return n!==null&&t&&t(new Zr(n)),y(!0)}function iu(n,t){return n!==null&&t&&t(new Xr(n)),y(!0)}function ou(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return y(!0);let s=r.map(i=>Tr(()=>{let o=Zt(t)??e,a=pt(i,o),c=Xl(a)?a.canActivate(t,n):ee(o,()=>a(t,n));return ve(c).pipe(be())}));return y(s).pipe(ft())}function au(n,t,e){let r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>Vl(o)).filter(o=>o!==null).map(o=>Tr(()=>{let a=o.guards.map(c=>{let l=Zt(o.node)??e,u=pt(c,l),d=Yl(u)?u.canActivateChild(r,n):ee(l,()=>u(r,n));return ve(d).pipe(be())});return y(a).pipe(ft())}));return y(i).pipe(ft())}function cu(n,t,e,r,s){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return y(!0);let o=i.map(a=>{let c=Zt(t)??s,l=pt(a,c),u=Zl(l)?l.canDeactivate(n,t,e,r):ee(c,()=>l(n,t,e,r));return ve(u).pipe(be())});return y(o).pipe(ft())}function lu(n,t,e,r){let s=t.canLoad;if(s===void 0||s.length===0)return y(!0);let i=s.map(o=>{let a=pt(o,n),c=Kl(a)?a.canLoad(t,e):ee(n,()=>a(t,e));return ve(c)});return y(i).pipe(ft(),aa(r))}function aa(n){return fi(M(t=>{if(typeof t!="boolean")throw nn(n,t)}),C(t=>t===!0))}function uu(n,t,e,r){let s=t.canMatch;if(!s||s.length===0)return y(!0);let i=s.map(o=>{let a=pt(o,n),c=Ql(a)?a.canMatch(t,e):ee(n,()=>a(t,e));return ve(c)});return y(i).pipe(ft(),aa(r))}var Kt=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Xt=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function nt(n){return Ct(new Kt(n))}function hu(n){return Ct(new A(4e3,!1))}function du(n){return Ct(sa(!1,$.GuardRejected))}var Os=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],s=e.root;for(;;){if(r=r.concat(s.segments),s.numberOfChildren===0)return y(r);if(s.numberOfChildren>1||!s.children[_])return hu(`${t.redirectTo}`);s=s.children[_]}}applyRedirectCommands(t,e,r,s,i){return fu(e,s,i).pipe(C(o=>{if(o instanceof oe)throw new Xt(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),t,r);if(o[0]==="/")throw new Xt(a);return a}))}applyRedirectCreateUrlTree(t,e,r,s){let i=this.createSegmentGroup(t,e.root,r,s);return new oe(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([s,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[s]=e[a]}else r[s]=i}),r}createSegmentGroup(t,e,r,s){let i=this.createSegments(t,e.segments,r,s),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,r,s)}),new O(i,o)}createSegments(t,e,r,s){return e.map(i=>i.path[0]===":"?this.findPosParam(t,i,s):this.findOrReturn(i,r))}findPosParam(t,e,r){let s=r[e.path.substring(1)];if(!s)throw new A(4001,!1);return s}findOrReturn(t,e){let r=0;for(let s of e){if(s.path===t.path)return e.splice(r),s;r++}return t}};function fu(n,t,e){if(typeof n=="string")return y(n);let r=n,{queryParams:s,fragment:i,routeConfig:o,url:a,outlet:c,params:l,data:u,title:d}=t;return ve(ee(e,()=>r({params:l,data:u,queryParams:s,fragment:i,routeConfig:o,url:a,outlet:c,title:d})))}var Is={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pu(n,t,e,r,s){let i=ca(n,t,e);return i.matched?(r=Nl(t,r),uu(r,t,e,s).pipe(C(o=>o===!0?i:g({},Is)))):y(i)}function ca(n,t,e){if(t.path==="**")return gu(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?g({},Is):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let s=(t.matcher||Uo)(e,n,t);if(!s)return g({},Is);let i={};Object.entries(s.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let o=s.consumed.length>0?g(g({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function gu(n){return{matched:!0,parameters:n.length>0?$o(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Mo(n,t,e,r){return e.length>0&&yu(n,e,r)?{segmentGroup:new O(t,vu(r,new O(e,n.children))),slicedSegments:[]}:e.length===0&&wu(n,e,r)?{segmentGroup:new O(n.segments,mu(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new O(n.segments,n.children),slicedSegments:e}}function mu(n,t,e,r){let s={};for(let i of e)if(an(n,t,i)&&!r[te(i)]){let o=new O([],{});s[te(i)]=o}return g(g({},r),s)}function vu(n,t){let e={};e[_]=t;for(let r of n)if(r.path===""&&te(r)!==_){let s=new O([],{});e[te(r)]=s}return e}function yu(n,t,e){return e.some(r=>an(n,t,r)&&te(r)!==_)}function wu(n,t,e){return e.some(r=>an(n,t,r))}function an(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function _u(n,t,e){return t.length===0&&!n.children[e]}var ks=class{};function bu(n,t,e,r,s,i,o="emptyOnly"){return new xs(n,t,e,r,s,o,i).recognize()}var Ru=31,xs=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,s,i,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=s,this.urlTree=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Os(this.urlSerializer,this.urlTree)}noMatchError(t){return new A(4002,`'${t.segmentGroup}'`)}recognize(){let t=Mo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(C(({children:e,rootSnapshot:r})=>{let s=new V(r,e),i=new Wt("",s),o=Jo(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(o),{state:i,tree:o}}))}match(t){let e=new je([],Object.freeze({}),Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,_,e).pipe(C(r=>({children:r,rootSnapshot:e})),xe(r=>{if(r instanceof Xt)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Kt?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,s,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,i):this.processSegment(t,e,r,r.segments,s,!0,i).pipe(C(o=>o instanceof V?[o]:[]))}processChildren(t,e,r,s){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return U(i).pipe(ge(o=>{let a=r.children[o],c=Ul(e,o);return this.processSegmentGroup(t,c,a,o,s)}),yi((o,a)=>(o.push(...a),o)),Bn(null),vi(),B(o=>{if(o===null)return nt(r);let a=la(o);return Su(a),y(a)}))}processSegment(t,e,r,s,i,o,a){return U(e).pipe(ge(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,r,s,i,o,a).pipe(xe(l=>{if(l instanceof Kt)return y(null);throw l}))),be(c=>!!c),xe(c=>{if(oa(c))return _u(r,s,i)?y(new ks):nt(r);throw c}))}processSegmentAgainstRoute(t,e,r,s,i,o,a,c){return te(r)!==o&&(o===_||!an(s,i,r))?nt(s):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,r,i,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,e,r,i,o,c):nt(s)}expandSegmentAgainstRouteUsingRedirect(t,e,r,s,i,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=ca(e,s,i);if(!c)return nt(e);typeof s.redirectTo=="string"&&s.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Ru&&(this.allowRedirects=!1));let f=new je(i,l,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,jo(s),te(s),s.component??s._loadedComponent??null,s,No(s)),v=rn(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(v.params),f.data=Object.freeze(v.data),this.applyRedirects.applyRedirectCommands(u,s.redirectTo,d,f,t).pipe(H(w=>this.applyRedirects.lineralizeSegments(s,w)),B(w=>this.processSegment(t,r,e,w.concat(p),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,s,i,o){let a=pu(e,r,s,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(H(c=>c.matched?(t=r._injector??t,this.getChildConfig(t,r,s).pipe(H(({routes:l})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:p,remainingSegments:f}=c,v=new je(p,d,Object.freeze(g({},this.urlTree.queryParams)),this.urlTree.fragment,jo(r),te(r),r.component??r._loadedComponent??null,r,No(r)),S=rn(v,o,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let{segmentGroup:w,slicedSegments:k}=Mo(e,p,f,l);if(k.length===0&&w.hasChildren())return this.processChildren(u,l,w,v).pipe(C(F=>new V(v,F)));if(l.length===0&&k.length===0)return y(new V(v,[]));let Y=te(r)===i;return this.processSegment(u,l,w,k,Y?_:i,!0,v).pipe(C(F=>new V(v,F instanceof V?[F]:[])))}))):nt(e)))}getChildConfig(t,e,r){return e.children?y({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?y({routes:e._loadedRoutes,injector:e._loadedInjector}):lu(t,e,r,this.urlSerializer).pipe(B(s=>s?this.configLoader.loadChildren(t,e).pipe(M(i=>{e._loadedRoutes=i.routes,e._loadedInjector=i.injector})):du(e))):y({routes:[],injector:t})}};function Su(n){n.sort((t,e)=>t.value.outlet===_?-1:e.value.outlet===_?1:t.value.outlet.localeCompare(e.value.outlet))}function Tu(n){let t=n.value.routeConfig;return t&&t.path===""}function la(n){let t=[],e=new Set;for(let r of n){if(!Tu(r)){t.push(r);continue}let s=t.find(i=>r.value.routeConfig===i.value.routeConfig);s!==void 0?(s.children.push(...r.children),e.add(s)):t.push(r)}for(let r of e){let s=la(r.children);t.push(new V(r.value,s))}return t.filter(r=>!e.has(r))}function jo(n){return n.data||{}}function No(n){return n.resolve||{}}function Eu(n,t,e,r,s,i){return B(o=>bu(n,t,e,r,o.extractedUrl,s,i).pipe(C(({state:a,tree:c})=>q(g({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Cu(n,t){return B(e=>{let{targetSnapshot:r,guards:{canActivateChecks:s}}=e;if(!s.length)return y(e);let i=new Set(s.map(c=>c.route)),o=new Set;for(let c of i)if(!o.has(c))for(let l of ua(c))o.add(l);let a=0;return U(o).pipe(ge(c=>i.has(c)?Au(c,r,n,t):(c.data=rn(c,c.parent,n).resolve,y(void 0))),M(()=>a++),zn(1),B(c=>a===o.size?y(e):pe))})}function ua(n){let t=n.children.map(e=>ua(e)).flat();return[n,...t]}function Au(n,t,e,r){let s=n.routeConfig,i=n._resolve;return s?.title!==void 0&&!ta(s)&&(i[Yt]=s.title),Tr(()=>(n.data=rn(n,n.parent,e).resolve,Ou(i,n,t,r).pipe(C(o=>(n._resolvedData=o,n.data=g(g({},n.data),o),null)))))}function Ou(n,t,e,r){let s=ws(n);if(s.length===0)return y({});let i={};return U(s).pipe(B(o=>Iu(n[o],t,e,r).pipe(be(),M(a=>{if(a instanceof dt)throw nn(new Te,a);i[o]=a}))),zn(1),C(()=>i),xe(o=>oa(o)?pe:Ct(o)))}function Iu(n,t,e,r){let s=Zt(t)??r,i=pt(n,s),o=i.resolve?i.resolve(t,e):ee(s,()=>i(t,e));return ve(o)}function vs(n){return H(t=>{let e=n(t);return e?U(e).pipe(C(()=>t)):y(t)})}var Us=(()=>{class n{buildTitle(e){let r,s=e.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(i=>i.outlet===_);return r}getResolvedTitleForRoute(e){return e.data[Yt]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>m(ha),providedIn:"root"})}return n})(),ha=(()=>{class n extends Us{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(E(Io))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ae=new x("",{providedIn:"root",factory:()=>({})}),$e=new x(""),cn=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=m(Ki);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return y(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=ve(e.loadComponent()).pipe(C(fa),M(i=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=i}),At(()=>{this.componentLoaders.delete(e)})),s=new $n(r,()=>new fe).pipe(Ln());return this.componentLoaders.set(e,s),s}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=da(r,this.compiler,e,this.onLoadEndListener).pipe(At(()=>{this.childrenLoaders.delete(r)})),o=new $n(i,()=>new fe).pipe(Ln());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function da(n,t,e,r){return ve(n.loadChildren()).pipe(C(fa),B(s=>s instanceof Bi||Array.isArray(s)?y(s):U(t.compileModuleAsync(s))),C(s=>{r&&r(n);let i,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(i=s.create(e).injector,o=i.get($e,[],{optional:!0,self:!0}).flat()),{routes:o.map(Ns),injector:i}}))}function ku(n){return n&&typeof n=="object"&&"default"in n}function fa(n){return ku(n)?n.default:n}var ln=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>m(xu),providedIn:"root"})}return n})(),xu=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ls=new x(""),$s=new x("");function pa(n,t,e){let r=n.get($s),s=n.get(L);if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,o=new Promise(l=>{i=l}),a=s.startViewTransition(()=>(i(),Pu(n))),{onViewTransitionCreated:c}=r;return c&&ee(n,()=>c({transition:a,from:t,to:e})),o}function Pu(n){return new Promise(t=>{Hi({read:()=>setTimeout(t)},{injector:n})})}var Fs=new x(""),un=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new fe;transitionAbortWithErrorSubject=new fe;configLoader=m(cn);environmentInjector=m(Re);destroyRef=m(Hn);urlSerializer=m(Ue);rootContexts=m(Le);location=m(et);inputBindingEnabled=m(Qt,{optional:!0})!==null;titleStrategy=m(Us);options=m(Ae,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=m(ln);createViewTransition=m(Ls,{optional:!0});navigationErrorHandler=m(Fs,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>y(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=s=>this.events.next(new Jr(s)),r=s=>this.events.next(new Kr(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(q(g({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(e){return this.transitions=new W(null),this.transitions.pipe(Q(r=>r!==null),H(r=>{let s=!1;return y(r).pipe(H(i=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",$.SupersededByNewNavigation),pe;this.currentTransition=r,this.currentNavigation={id:i.id,initialUrl:i.rawUrl,extractedUrl:i.extractedUrl,targetBrowserUrl:typeof i.extras.browserUrl=="string"?this.urlSerializer.parse(i.extras.browserUrl):i.extras.browserUrl,trigger:i.source,extras:i.extras,previousNavigation:this.lastSuccessfulNavigation?q(g({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>i.abortController.abort()};let o=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=i.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!o&&a!=="reload"){let c="";return this.events.next(new ae(i.id,this.urlSerializer.serialize(i.rawUrl),c,ct.IgnoredSameUrlNavigation)),i.resolve(!1),pe}if(this.urlHandlingStrategy.shouldProcessUrl(i.rawUrl))return y(i).pipe(H(c=>(this.events.next(new Ce(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?pe:Promise.resolve(c))),Eu(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),M(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=q(g({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let l=new Ht(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(i.currentRawUrl)){let{id:c,extractedUrl:l,source:u,restoredState:d,extras:p}=i,f=new Ce(c,this.urlSerializer.serialize(l),u,d);this.events.next(f);let v=Qo(this.rootComponentType).snapshot;return this.currentTransition=r=q(g({},i),{targetSnapshot:v,urlAfterRedirects:l,extras:q(g({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,y(r)}else{let c="";return this.events.next(new ae(i.id,this.urlSerializer.serialize(i.extractedUrl),c,ct.IgnoredByUrlHandlingStrategy)),i.resolve(!1),pe}}),M(i=>{let o=new Hr(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot);this.events.next(o)}),C(i=>(this.currentTransition=r=q(g({},i),{guards:Hl(i.targetSnapshot,i.currentSnapshot,this.rootContexts)}),r)),tu(this.environmentInjector,i=>this.events.next(i)),M(i=>{if(r.guardsResult=i.guardsResult,i.guardsResult&&typeof i.guardsResult!="boolean")throw nn(this.urlSerializer,i.guardsResult);let o=new Vr(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects),i.targetSnapshot,!!i.guardsResult);this.events.next(o)}),Q(i=>i.guardsResult?!0:(this.cancelNavigationTransition(i,"",$.GuardRejected),!1)),vs(i=>{if(i.guards.canActivateChecks.length!==0)return y(i).pipe(M(o=>{let a=new Gr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),H(o=>{let a=!1;return y(o).pipe(Cu(this.paramsInheritanceStrategy,this.environmentInjector),M({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",$.NoDataFromResolver)}}))}),M(o=>{let a=new Wr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),vs(i=>{let o=a=>{let c=[];a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(a.routeConfig).pipe(M(l=>{a.component=l}),C(()=>{})));for(let l of a.children)c.push(...o(l));return c};return Sr(o(i.targetSnapshot.root)).pipe(Bn(null),Ke(1))}),vs(()=>this.afterPreactivation()),H(()=>{let{currentSnapshot:i,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,i.root,o.root);return a?U(a).pipe(C(()=>r)):y(r)}),C(i=>{let o=$l(e.routeReuseStrategy,i.targetSnapshot,i.currentRouterState);return this.currentTransition=r=q(g({},i),{targetRouterState:o}),this.currentNavigation.targetRouterState=o,r}),M(()=>{this.events.next(new Vt)}),ql(this.rootContexts,e.routeReuseStrategy,i=>this.events.next(i),this.inputBindingEnabled),Ke(1),qn(new Un(i=>{let o=r.abortController.signal,a=()=>i.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(Q(()=>!s&&!r.targetRouterState),M(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",$.Aborted)}))),M({next:i=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new J(i.id,this.urlSerializer.serialize(i.extractedUrl),this.urlSerializer.serialize(i.urlAfterRedirects))),this.titleStrategy?.updateTitle(i.targetRouterState.snapshot),i.resolve(!0)},complete:()=>{s=!0}}),qn(this.transitionAbortWithErrorSubject.pipe(M(i=>{throw i}))),At(()=>{s||this.cancelNavigationTransition(r,"",$.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),xe(i=>{if(this.destroyed)return r.resolve(!1),pe;if(s=!0,ia(i))this.events.next(new ie(r.id,this.urlSerializer.serialize(r.extractedUrl),i.message,i.cancellationCode)),zl(i)?this.events.next(new ht(i.url,i.navigationBehaviorOptions)):r.resolve(!1);else{let o=new lt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,r.targetSnapshot??void 0);try{let a=ee(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof dt){let{message:c,cancellationCode:l}=nn(this.urlSerializer,a);this.events.next(new ie(r.id,this.urlSerializer.serialize(r.extractedUrl),c,l)),this.events.next(new ht(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),i}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return pe}))}))}cancelNavigationTransition(e,r,s){let i=new ie(e.id,this.urlSerializer.serialize(e.extractedUrl),r,s);this.events.next(i),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Du(n){return n!==ot}var ga=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>m(Mu),providedIn:"root"})}return n})(),on=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Mu=(()=>{class n extends on{static \u0275fac=(()=>{let e;return function(s){return(e||(e=Gn(n)))(s||n)}})();static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ma=(()=>{class n{urlSerializer=m(Ue);options=m(Ae,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=m(et);urlHandlingStrategy=m(ln);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new oe;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:s}){let i=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,o=s??i;return o instanceof oe?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:s}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,s),this.routerState=e):this.rawUrlTree=s}routerState=Qo(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:()=>m(ju),providedIn:"root"})}return n})(),ju=(()=>{class n extends ma{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Ce?this.updateStateMemento():e instanceof ae?this.commitTransition(r):e instanceof Ht?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Vt?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof ie&&e.code!==$.SupersededByNewNavigation&&e.code!==$.Redirect?this.restoreHistory(r):e instanceof lt?this.restoreHistory(r,!0):e instanceof J&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:s}){let{replaceUrl:i,state:o}=r;if(this.location.isCurrentPathEqualTo(e)||i){let a=this.browserPageId,c=g(g({},o),this.generateNgRouterState(s,a));this.location.replaceState(e,"",c)}else{let a=g(g({},o),this.generateNgRouterState(s,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,i=this.currentPageId-s;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===e.finalUrl&&i===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(s){return(e||(e=Gn(n)))(s||n)}})();static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hn(n,t){n.events.pipe(Q(e=>e instanceof J||e instanceof ie||e instanceof lt||e instanceof ae),C(e=>e instanceof J||e instanceof ae?0:(e instanceof ie?e.code===$.Redirect||e.code===$.SupersededByNewNavigation:!1)?2:1),Q(e=>e!==2),Ke(1)).subscribe(()=>{t()})}var Nu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},K=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=m(Xn);stateManager=m(ma);options=m(Ae,{optional:!0})||{};pendingTasks=m(Si);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=m(un);urlSerializer=m(Ue);location=m(et);urlHandlingStrategy=m(ln);injector=m(Re);_events=new fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=m(ga);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=m($e,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!m(Qt,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new di;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(s!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof ie&&r.code!==$.Redirect&&r.code!==$.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof J)this.navigated=!0;else if(r instanceof ht){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=g({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Du(s.source)},o);this.scheduleNavigation(a,ot,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}jl(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortWithErrorSubject.next(s)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ot,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,s)=>{this.navigateToSyncWithBrowser(e,s,r)})}navigateToSyncWithBrowser(e,r,s){let i={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let c=g({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,i).catch(c=>{this.injector.get(Cr)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Ns),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:s,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=g(g({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=s?s.snapshot:this.routerState.snapshot.root;d=Ko(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return Xo(d,e,u,l??null)}navigateByUrl(e,r={skipLocationChange:!1}){let s=Ee(e)?e:this.parseUrl(e),i=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(i,ot,null,r)}navigate(e,r={skipLocationChange:!1}){return Lu(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let s;if(r===!0?s=g({},Nu):r===!1?s=g({},Uu):s=r,Ee(e))return ko(this.currentUrlTree,e,s);let i=this.parseUrl(e);return ko(this.currentUrlTree,i,s)}removeEmptyProps(e){return Object.entries(e).reduce((r,[s,i])=>(i!=null&&(r[s]=i),r),{})}scheduleNavigation(e,r,s,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,p)=>{a=d,c=p});let u=this.pendingTasks.add();return hn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lu(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new A(4008,!1)}var va=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ri(null);get href(){return Xi(this.reactiveHref)}set href(e){this.reactiveHref.set(e)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new fe;applicationErrorHandler=m(Cr);options=m(Ae,{optional:!0});constructor(e,r,s,i,o,a){this.router=e,this.route=r,this.tabIndexAttribute=s,this.renderer=i,this.el=o,this.locationStrategy=a,this.reactiveHref.set(m(new Yi("href"),{optional:!0}));let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let e=this.preserveFragment,r=s=>s==="merge"||s==="preserve";e||=r(this.queryParamsHandling),e||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),e&&(this.subscription=this.router.events.subscribe(s=>{s instanceof J&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ee(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,s,i,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||s||i||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.reactiveHref.set(e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e))??"":null)}applyAttributeValue(e,r){let s=this.renderer,i=this.el.nativeElement;r!==null?s.setAttribute(i,e,r):s.removeAttribute(i,e)}get urlTree(){return this.routerLinkInput===null?null:Ee(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(Ze(K),Ze(ce),Ti("tabindex"),Ze(Ui),Ze(Ei),Ze(Mt))};static \u0275dir=Ir({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,s){r&1&&Ji("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&Gi("href",s.reactiveHref(),ji)("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",kr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",kr],replaceUrl:[2,"replaceUrl","replaceUrl",kr],routerLink:"routerLink"},features:[Ar]})}return n})();var tr=class{};var ya=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,s,i){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe(Q(e=>e instanceof J),ge(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let s=[];for(let i of r){i.providers&&!i._injector&&(i._injector=Or(i.providers,e,`Route: ${i.path}`));let o=i._injector??e,a=i._loadedInjector??o;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&s.push(this.preloadConfig(o,i)),(i.children||i._loadedRoutes)&&s.push(this.processRoutes(a,i.children??i._loadedRoutes))}return U(s).pipe(Fn())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(e,r):s=y(null);let i=s.pipe(B(o=>o===null?y(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return U([i,o]).pipe(Fn())}else return i})}static \u0275fac=function(r){return new(r||n)(E(K),E(Re),E(tr),E(cn))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wa=new x(""),$u=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=ot;restoredId=0;store={};constructor(e,r,s,i,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=s,this.zone=i,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ce?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof J?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ae&&e.code===ct.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ut&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>h(this,null,function*(){yield new Promise(s=>{setTimeout(s),typeof requestAnimationFrame<"u"&&requestAnimationFrame(s)}),this.zone.run(()=>{this.transitions.events.next(new ut(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Li()};static \u0275prov=T({token:n,factory:n.\u0275fac})}return n})();function Fu(n,...t){return Er([{provide:$e,multi:!0,useValue:n},[],{provide:ce,useFactory:_a,deps:[K]},{provide:Zn,multi:!0,useFactory:ba},t.map(e=>e.\u0275providers)])}function _a(n){return n.routerState.root}function rr(n,t){return{\u0275kind:n,\u0275providers:t}}function ba(){let n=m(It);return t=>{let e=n.get(Qn);if(t!==e.components[0])return;let r=n.get(K),s=n.get(Ra);n.get(zs)===1&&r.initialNavigation(),n.get(Ea,null,{optional:!0})?.setUpPreloading(),n.get(wa,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var Ra=new x("",{factory:()=>new fe}),zs=new x("",{providedIn:"root",factory:()=>1});function Sa(){let n=[{provide:zs,useValue:0},Yn(()=>{let t=m(It);return t.get(no,Promise.resolve()).then(()=>new Promise(r=>{let s=t.get(K),i=t.get(Ra);hn(s,()=>{r(!0)}),t.get(un).afterPreactivation=()=>(r(!0),i.closed?y(void 0):i),s.initialNavigation()}))})];return rr(2,n)}function Ta(){let n=[Yn(()=>{m(K).setUpLocationChangeListener()}),{provide:zs,useValue:2}];return rr(3,n)}var Ea=new x("");function Ca(n){return rr(0,[{provide:Ea,useExisting:ya},{provide:tr,useExisting:n}])}function Aa(){return rr(8,[Ms,{provide:Qt,useExisting:Ms}])}function Oa(n){Fi("NgRouterViewTransitions");let t=[{provide:Ls,useValue:pa},{provide:$s,useValue:g({skipNextTransition:!!n?.skipInitialTransition},n)}];return rr(9,t)}var Ia=[et,{provide:Ue,useClass:Te},K,Le,{provide:ce,useFactory:_a,deps:[K]},cn,[]],Bu=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[Ia,[],{provide:$e,multi:!0,useValue:e},[],r?.errorHandler?{provide:Fs,useValue:r.errorHandler}:[],{provide:Ae,useValue:r||{}},r?.useHash?qu():Hu(),zu(),r?.preloadingStrategy?Ca(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Vu(r):[],r?.bindToComponentInputs?Aa().\u0275providers:[],r?.enableViewTransitions?Oa().\u0275providers:[],Gu()]}}static forChild(e){return{ngModule:n,providers:[{provide:$e,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pt({type:n});static \u0275inj=Ot({})}return n})();function zu(){return{provide:wa,useFactory:()=>{let n=m(uo),t=m(ne),e=m(Ae),r=m(un),s=m(Ue);return e.scrollOffset&&n.setOffset(e.scrollOffset),new $u(s,r,n,t,e)}}}function qu(){return{provide:Mt,useClass:io}}function Hu(){return{provide:Mt,useClass:so}}function Vu(n){return[n.initialNavigation==="disabled"?Ta().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Sa().\u0275providers:[]]}var Bs=new x("");function Gu(){return[{provide:Bs,useFactory:ba},{provide:Zn,multi:!0,useExisting:Bs}]}var ka=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};var nr=class extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}},dn=class extends nr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},fn=class extends nr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},pn=class extends nr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},qs=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(qs||{});var Wu=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},sr=class{constructor(t,{headers:e={},customFetch:r,region:s=qs.Any}={}){this.url=t,this.headers=e,this.region=s,this.fetch=ka(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return Wu(this,void 0,void 0,function*(){try{let{headers:s,method:i,body:o}=e,a={},{region:c}=e;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(v=>{throw new dn(v)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new fn(u);if(!u.ok)throw new pn(u);let p=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return p==="application/json"?f=yield u.json():p==="application/octet-stream"?f=yield u.blob():p==="text/event-stream"?f=u:p==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}};var qa=xc(za(),1),{PostgrestClient:Ha,PostgrestQueryBuilder:op,PostgrestFilterBuilder:ap,PostgrestTransformBuilder:cp,PostgrestBuilder:lp,PostgrestError:ih}=qa.default;function Va(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}var Ga=Va();var Wa="2.11.13";var Ja={"X-Client-Info":`realtime-js/${Wa}`},Ka="1.0.0";var yn=1e4,Xa=1e3,hr=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(hr||{}),N=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(N||{}),X=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(X||{}),ti=function(n){return n.websocket="websocket",n}(ti||{}),Fe=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Fe||{});var wn=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let s=e.getUint8(1),i=e.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(t.slice(o,o+s));o=o+s;let c=r.decode(t.slice(o,o+i));o=o+i;let l=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var mt=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var I=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(I||{}),ni=(n,t,e={})=>{var r;let s=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=oh(o,n,t,s),i),{})},oh=(n,t,e,r)=>{let s=t.find(a=>a.name===n),i=s?.type,o=e[n];return i&&!r.includes(i)?Ya(i,o):ri(o)},Ya=(n,t)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return uh(t,e)}switch(n){case I.bool:return ah(t);case I.float4:case I.float8:case I.int2:case I.int4:case I.int8:case I.numeric:case I.oid:return ch(t);case I.json:case I.jsonb:return lh(t);case I.timestamp:return hh(t);case I.abstime:case I.date:case I.daterange:case I.int4range:case I.int8range:case I.money:case I.reltime:case I.text:case I.time:case I.timestamptz:case I.timetz:case I.tsrange:case I.tstzrange:return ri(t);default:return ri(t)}},ri=n=>n,ah=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},ch=n=>{if(typeof n=="string"){let t=parseFloat(n);if(!Number.isNaN(t))return t}return n},lh=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},uh=(n,t)=>{if(typeof n!="string")return n;let e=n.length-1,r=n[e];if(n[0]==="{"&&r==="}"){let i,o=n.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Ya(t,a))}return n},hh=n=>typeof n=="string"?n.replace(" ","T"):n,_n=n=>{let t=n;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var vt=class{constructor(t,e,r={},s=yn){this.channel=t,this.event=e,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var dr=class n{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{let{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=n.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,s){let i=this.cloneDeep(t),o=this.transformState(e),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{let d=i[l];if(d){let p=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),v=u.filter(w=>f.indexOf(w.presence_ref)<0),S=d.filter(w=>p.indexOf(w.presence_ref)<0);v.length>0&&(a[l]=v),S.length>0&&(c[l]=S)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(t,e,r,s){let{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),p=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...p)}r(a,u,c)}),this.map(o,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,s(a,l,c),l.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{let s=t[r];return"metas"in s?e[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[r]=s,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ye=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(ye||{});var fr=class n{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=N.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new vt(this,X.join,this.params,this.timeout),this.rejoinTimer=new mt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=N.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=N.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=N.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=N.errored,this.rejoinTimer.scheduleTimeout())}),this._on(X.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new dr(this),this.broadcastEndpointURL=_n(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==N.closed){let{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>t?.(ye.CHANNEL_ERROR,u)),this._onClose(()=>t?.(ye.CLOSED));let c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",d=>h(this,[d],function*({postgres_changes:u}){var p;if(this.socket.setAuth(),u===void 0){t?.(ye.SUBSCRIBED);return}else{let f=this.bindings.postgres_changes,v=(p=f?.length)!==null&&p!==void 0?p:0,S=[];for(let w=0;w<v;w++){let k=f[w],{filter:{event:Y,schema:F,table:Z,filter:he}}=k,Je=u&&u[w];if(Je&&Je.event===Y&&Je.schema===F&&Je.table===Z&&Je.filter===he)S.push(Object.assign(Object.assign({},k),{id:Je.id}));else{this.unsubscribe(),this.state=N.errored,t?.(ye.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(ye.SUBSCRIBED);return}})).receive("error",u=>{this.state=N.errored,t?.(ye.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(ye.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return h(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return h(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,r){return this._on(t,e,r)}send(r){return h(this,arguments,function*(t,e={}){var s,i;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let u=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=e.timeout)!==null&&s!==void 0?s:this.timeout);return yield(i=u.body)===null||i===void 0?void 0:i.cancel(),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,l;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=N.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(X.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new vt(this,X.leave,{},t),r.receive("ok",()=>{e(),s("ok")}).receive("timeout",()=>{e(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}_fetchWithTimeout(t,e,r){return h(this,null,function*(){let s=new AbortController,i=setTimeout(()=>s.abort(),r),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:s.signal}));return clearTimeout(i),o})}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new vt(this,t,e,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var s,i;let o=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=X;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,e,r);if(e&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var v,S,w;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(S=f.filter)===null||S===void 0?void 0:S.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var v,S,w,k,Y,F;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let Z=f.id,he=(v=f.filter)===null||v===void 0?void 0:v.event;return Z&&((S=e.ids)===null||S===void 0?void 0:S.includes(Z))&&(he==="*"||he?.toLocaleLowerCase()===((w=e.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{let Z=(Y=(k=f?.filter)===null||k===void 0?void 0:k.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return Z==="*"||Z===((F=e?.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){let v=p.data,{schema:S,table:w,commit_timestamp:k,type:Y,errors:F}=v;p=Object.assign(Object.assign({},{schema:S,table:w,commit_timestamp:k,eventType:Y,new:{},old:{},errors:F}),this._getPayloadRecords(v))}f.callback(p,r)})}_isClosed(){return this.state===N.closed}_isJoined(){return this.state===N.joined}_isJoining(){return this.state===N.joining}_isLeaving(){return this.state===N.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let s=t.toLocaleLowerCase(),i={type:s,filter:e,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&n.isEqual(s.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(X.close,{},t)}_onError(t){this._on(X.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=N.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=ni(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=ni(t.columns,t.old_record)),e}};var Za=()=>{},fh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,pr=class{constructor(t,e){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ja,this.params={},this.timeout=yn,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Za,this.ref=0,this.logger=Za,this.conn=null,this.sendBuffer=[],this.serializer=new wn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>import("./chunk-BX7VDEVO.js").then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${ti.websocket}`,this.httpEndpoint=_n(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let s=(r=e?.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=e?.encode?e.encode:(i,o)=>o(JSON.stringify(i)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mt(()=>h(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch),e?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=e?.worker||!1,this.workerUrl=e?.workerUrl}this.accessToken=e?.accessToken||null}connect(){this.conn||(this.transport||(this.transport=Ga),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ka}))}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}removeChannel(t){return h(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return h(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t})}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case hr.connecting:return Fe.Connecting;case hr.open:return Fe.Open;case hr.closing:return Fe.Closing;default:return Fe.Closed}}isConnected(){return this.connectionState()===Fe.Open}channel(t,e={config:{}}){let r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{let i=new fr(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){let{topic:e,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${e} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t=null){return h(this,null,function*(){let e=t||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{e&&r.updateJoinPayload({access_token:e,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(X.access_token,{access_token:e})}))})}sendHeartbeat(){return h(this,null,function*(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Xa,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),yield this.setAuth()})}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:r,event:s,payload:i,ref:o}=e;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(e.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(X.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let r=t.match(/\?/)?"&":"?",s=new URLSearchParams(e);return`${t}${r}${s}`}_workerObjectUrl(t){let e;if(t)e=t;else{let r=new Blob([fh],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}};var yt=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function P(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var bn=class extends yt{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Be=class extends yt{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var ph=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Sn=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},Qa=()=>ph(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-BX7VDEVO.js")).Response:Response}),Rn=n=>{if(Array.isArray(n))return n.map(e=>Rn(e));if(typeof n=="function"||n!==Object(n))return n;let t={};return Object.entries(n).forEach(([e,r])=>{let s=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Rn(r)}),t};var ze=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},si=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),gh=(n,t,e)=>ze(void 0,void 0,void 0,function*(){let r=yield Qa();n instanceof r&&!e?.noResolveJson?n.json().then(s=>{t(new bn(si(s),n.status||500))}).catch(s=>{t(new Be(si(s),s))}):t(new Be(si(n),n))}),mh=(n,t,e,r)=>{let s={method:n,headers:t?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t?.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),e))};function gr(n,t,e,r,s,i){return ze(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(e,mh(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>gh(c,a,r))})})}function wt(n,t,e,r){return ze(this,void 0,void 0,function*(){return gr(n,"GET",t,e,r)})}function le(n,t,e,r,s){return ze(this,void 0,void 0,function*(){return gr(n,"POST",t,r,s,e)})}function ec(n,t,e,r,s){return ze(this,void 0,void 0,function*(){return gr(n,"PUT",t,r,s,e)})}function tc(n,t,e,r){return ze(this,void 0,void 0,function*(){return gr(n,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function Tn(n,t,e,r,s){return ze(this,void 0,void 0,function*(){return gr(n,"DELETE",t,r,s,e)})}var z=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},vh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},En=class{constructor(t,e={},r,s){this.url=t,this.headers=e,this.bucketId=r,this.fetch=Sn(s)}uploadOrUpdate(t,e,r,s){return z(this,void 0,void 0,function*(){try{let i,o=Object.assign(Object.assign({},rc),s),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));let l=this._removeEmptyFolders(e),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield d.json();return d.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(i){if(P(i))return{data:null,error:i};throw i}})}upload(t,e,r){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,s){return z(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let c,l=Object.assign({upsert:rc.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);let d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),p=yield d.json();return d.ok?{data:{path:i,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(P(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,e){return z(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),s=Object.assign({},this.headers);e?.upsert&&(s["x-upsert"]="true");let i=yield le(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new yt("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}})}update(t,e,r){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return z(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}})}copy(t,e,r){return z(this,void 0,void 0,function*(){try{return{data:{path:(yield le(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}})}createSignedUrl(t,e,r){return z(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield le(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:e},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}})}createSignedUrls(t,e,r){return z(this,void 0,void 0,function*(){try{let s=yield le(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}})}download(t,e){return z(this,void 0,void 0,function*(){let s=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield wt(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(P(a))return{data:null,error:a};throw a}})}info(t){return z(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let r=yield wt(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Rn(r),error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}})}exists(t){return z(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield tc(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(P(r)&&r instanceof Be){let s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){let r=this._getFinalPath(t),s=[],i=e?.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&s.push(i);let a=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(t){return z(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(P(e))return{data:null,error:e};throw e}})}list(t,e,r){return z(this,void 0,void 0,function*(){try{let s=Object.assign(Object.assign(Object.assign({},vh),e),{prefix:t||""});return{data:yield le(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(P(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var nc="2.7.1";var sc={"X-Client-Info":`storage-js/${nc}`};var _t=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Cn=class{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},sc),e),this.fetch=Sn(r)}listBuckets(){return _t(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}})}getBucket(t){return _t(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(P(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return _t(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return _t(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(P(r))return{data:null,error:r};throw r}})}emptyBucket(t){return _t(this,void 0,void 0,function*(){try{return{data:yield le(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(P(e))return{data:null,error:e};throw e}})}deleteBucket(t){return _t(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(P(e))return{data:null,error:e};throw e}})}};var mr=class extends Cn{constructor(t,e={},r){super(t,e,r)}from(t){return new En(this.url,this.headers,t,this.fetch)}};var ic="2.50.1";var vr="";typeof Deno<"u"?vr="deno":typeof document<"u"?vr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vr="react-native":vr="node";var yh={"X-Client-Info":`supabase-js-${vr}/${ic}`},oc={headers:yh},ac={schema:"public"},cc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lc={};po();var wh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},_h=n=>{let t;return n?t=n:typeof fetch>"u"?t=ho:t=fetch,(...e)=>t(...e)},bh=()=>typeof Headers>"u"?fo:Headers,uc=(n,t,e)=>{let r=_h(e),s=bh();return(i,o)=>wh(void 0,void 0,void 0,function*(){var a;let c=(a=yield t())!==null&&a!==void 0?a:n,l=new s(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var Rh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})};function hc(n){return n.endsWith("/")?n:n+"/"}function dc(n,t){var e,r;let{db:s,auth:i,realtime:o,global:a}=n,{db:c,auth:l,realtime:u,global:d}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(e=d?.headers)!==null&&e!==void 0?e:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Rh(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}function fc(n){return Math.round(Date.now()/1e3)+n}function pc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let t=Math.random()*16|0;return(n=="x"?t:t&3|8).toString(16)})}var re=()=>typeof document<"u",qe={tested:!1,writable:!1},Oe=()=>{if(!re())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qe.tested)return qe.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),qe.tested=!0,qe.writable=!0}catch{qe.tested=!0,qe.writable=!1}return qe.writable};function An(n){let t={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return e.searchParams.forEach((r,s)=>{t[s]=r}),t}var On=n=>{let t;return n?t=n:typeof fetch>"u"?t=(...e)=>import("./chunk-BX7VDEVO.js").then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},gc=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ie=(n,t,e)=>h(null,null,function*(){yield n.setItem(t,JSON.stringify(e))}),wr=(n,t)=>h(null,null,function*(){let e=yield n.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),In=(n,t)=>h(null,null,function*(){yield n.removeItem(t)});function Sh(n){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",r,s,i,o,a,c,l,u=0;for(n=n.replace("-","+").replace("_","/");u<n.length;)o=t.indexOf(n.charAt(u++)),a=t.indexOf(n.charAt(u++)),c=t.indexOf(n.charAt(u++)),l=t.indexOf(n.charAt(u++)),r=o<<2|a>>4,s=(a&15)<<4|c>>2,i=(c&3)<<6|l,e=e+String.fromCharCode(r),c!=64&&s!=0&&(e=e+String.fromCharCode(s)),l!=64&&i!=0&&(e=e+String.fromCharCode(i));return e}var yr=class n{constructor(){this.promise=new n.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};yr.promiseConstructor=Promise;function ii(n){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=n.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let r=e[1];return JSON.parse(Sh(r))}function mc(n){return h(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),n)})})}function vc(n,t){return new Promise((r,s)=>{h(null,null,function*(){for(let i=0;i<1/0;i++)try{let o=yield n(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})})}function Th(n){return("0"+n.toString(16)).substr(-2)}function He(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length,s="";for(let i=0;i<56;i++)s+=e.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Th).join("")}function Eh(n){return h(this,null,function*(){let e=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",e),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function Ch(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Ve(n){return h(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield Eh(n);return Ch(e)})}var _r=class extends Error{constructor(t,e){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e}};function b(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var kn=class extends _r{constructor(t,e){super(t,e),this.name="AuthApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}};function yc(n){return b(n)&&n.name==="AuthApiError"}var bt=class extends _r{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},we=class extends _r{constructor(t,e,r){super(t),this.name=e,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}},_e=class extends we{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}},Rt=class extends we{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}},Ge=class extends we{constructor(t){super(t,"AuthInvalidCredentialsError",400)}},We=class extends we{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},br=class extends we{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},St=class extends we{constructor(t,e){super(t,"AuthRetryableFetchError",e)}};function Pn(n){return b(n)&&n.name==="AuthRetryableFetchError"}var xn=class extends we{constructor(t,e,r){super(t,"AuthWeakPasswordError",e),this.reasons=r}};var Ah=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]]);return e},Tt=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Oh=[502,503,504];function wc(n){return h(this,null,function*(){if(!gc(n))throw new St(Tt(n),0);if(Oh.includes(n.status))throw new St(Tt(n),n.status);let t;try{t=yield n.json()}catch(e){throw new bt(Tt(e),e)}throw typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)?new xn(Tt(t),n.status,t.weak_password.reasons):new kn(Tt(t),n.status||500)})}var Ih=(n,t,e,r)=>{let s={method:n,headers:t?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),e))};function R(n,t,e,r){return h(this,null,function*(){var s;let i=Object.assign({},r?.headers);r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);let o=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield kh(n,t,e+a,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function kh(n,t,e,r,s,i){return h(this,null,function*(){let o=Ih(t,r,s,i),a;try{a=yield n(e,o)}catch(c){throw console.error(c),new St(Tt(c),0)}if(a.ok||(yield wc(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield wc(c)}})}function ke(n){var t;let e=null;xh(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=fc(n.expires_in)));let r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:e,user:r},error:null}}function oi(n){let t=ke(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function ue(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function _c(n){return{data:n,error:null}}function bc(n){let{action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:i}=n,o=Ah(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function Rc(n){return n}function xh(n){return n.access_token&&n.refresh_token&&n.expires_in}var Ph=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]]);return e},Et=class{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=On(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return h(this,null,function*(){try{return yield R(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(b(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return h(this,arguments,function*(t,e={}){try{return yield R(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:ue})}catch(s){if(b(s))return{data:{user:null},error:s};throw s}})}generateLink(t){return h(this,null,function*(){try{let{options:e}=t,r=Ph(t,["options"]),s=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),yield R(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:bc,redirectTo:e?.redirectTo})}catch(e){if(b(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return h(this,null,function*(){try{return yield R(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ue})}catch(e){if(b(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return h(this,null,function*(){var e,r,s,i,o,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=yield R(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Rc});if(u.error)throw u.error;let d=yield u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(v=>{let S=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);l[`${w}Page`]=S}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(b(l))return{data:{users:[]},error:l};throw l}})}getUserById(t){return h(this,null,function*(){try{return yield R(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ue})}catch(e){if(b(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return h(this,null,function*(){try{return yield R(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:ue})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,e=!1){return h(this,null,function*(){try{return yield R(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:ue})}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return h(this,null,function*(){try{let{data:e,error:r}=yield R(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:e,error:r}}catch(e){if(b(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return h(this,null,function*(){try{return{data:yield R(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(b(e))return{data:null,error:e};throw e}})}};var Dn="2.61.0";var Sc="http://localhost:9999",Tc="supabase.auth.token";var Ec={"X-Client-Info":`gotrue-js/${Dn}`},ai=10;var Cc={getItem:n=>Oe()?globalThis.localStorage.getItem(n):null,setItem:(n,t)=>{Oe()&&globalThis.localStorage.setItem(n,t)},removeItem:n=>{Oe()&&globalThis.localStorage.removeItem(n)}};function ci(n={}){return{getItem:t=>n[t]||null,setItem:(t,e)=>{n[t]=e},removeItem:t=>{delete n[t]}}}function Ac(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Dh={debug:!!(globalThis&&Oe()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Mn=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}};Ac();var Mh={url:Sc,storageKey:Tc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ec,flowType:"implicit",debug:!1},Rr=30*1e3,Oc=3;function jh(n,t,e){return h(this,null,function*(){return yield e()})}var li=(()=>{class n{constructor(e){var r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&re()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},Mh),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Et({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=On(s.fetch),this.lock=s.lock||jh,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Oe()?this.storage=Cc:(this.memoryStorage={},this.storage=ci(this.memoryStorage)):(this.memoryStorage={},this.storage=ci(this.memoryStorage)),re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",i=>h(this,null,function*(){this._debug("received broadcast notification from other tab or client",i),yield this._notifyAllSubscribers(i.data.event,i.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dn}) ${new Date().toISOString()}`,...e),this}initialize(){return h(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=h(this,null,function*(){return yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return h(this,null,function*(){try{let e=re()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:r,error:s}=yield this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),s?.message==="Identity is already linked"||s?.message==="Identity is already linked to another user"?{error:s}:(yield this._removeSession(),{error:s});let{session:i,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),yield this._saveSession(i),setTimeout(()=>h(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",i):yield this._notifyAllSubscribers("SIGNED_IN",i)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return b(e)?{error:e}:{error:new bt("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(e){return h(this,null,function*(){var r,s,i;try{yield this._removeSession();let o;if("email"in e){let{email:d,password:p,options:f}=e,v=null,S=null;if(this.flowType==="pkce"){let w=He();yield Ie(this.storage,`${this.storageKey}-code-verifier`,w),v=yield Ve(w),S=w===v?"plain":"s256"}o=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:p,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:v,code_challenge_method:S},xform:ke})}else if("phone"in e){let{phone:d,password:p,options:f}=e;o=yield R(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(s=f?.data)!==null&&s!==void 0?s:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ke})}else throw new Ge("You must provide either an email or phone number and a password");let{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(o){if(b(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return h(this,null,function*(){try{yield this._removeSession();let r;if("email"in e){let{email:o,password:a,options:c}=e;r=yield R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:oi})}else if("phone"in e){let{phone:o,password:a,options:c}=e;r=yield R(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:oi})}else throw new Ge("You must provide either an email or phone number and a password");let{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Rt}:(s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(e){return h(this,null,function*(){var r,s,i,o;return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return h(this,null,function*(){let r=yield wr(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/"),{data:o,error:a}=yield R(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ke});return yield In(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Rt}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})})}signInWithIdToken(e){return h(this,null,function*(){yield this._removeSession();try{let{options:r,provider:s,token:i,access_token:o,nonce:a}=e,c=yield R(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ke}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Rt}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(e){return h(this,null,function*(){var r,s,i,o,a;try{if(yield this._removeSession(),"email"in e){let{email:c,options:l}=e,u=null,d=null;if(this.flowType==="pkce"){let f=He();yield Ie(this.storage,`${this.storageKey}-code-verifier`,f),u=yield Ve(f),d=f===u?"plain":"s256"}let{error:p}=yield R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){let{phone:c,options:l}=e,{data:u,error:d}=yield R(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l?.data)!==null&&i!==void 0?i:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Ge("You must provide either an email or phone number.")}catch(c){if(b(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(e){return h(this,null,function*(){var r,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&(yield this._removeSession());let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);let{data:a,error:c}=yield R(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:ke});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(b(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){return h(this,null,function*(){var r,s,i;try{yield this._removeSession();let o=null,a=null;if(this.flowType==="pkce"){let c=He();yield Ie(this.storage,`${this.storageKey}-code-verifier`,c),o=yield Ve(c),a=c===o?"plain":"s256"}return yield R(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:_c})}catch(o){if(b(o))return{data:null,error:o};throw o}})}reauthenticate(){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return h(this,null,function*(){try{return yield this._useSession(e=>h(this,null,function*(){let{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new _e;let{error:i}=yield R(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}}))}catch(e){if(b(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return h(this,null,function*(){try{e.type!="email_change"&&e.type!="phone_change"&&(yield this._removeSession());let r=`${this.url}/resend`;if("email"in e){let{email:s,type:i,options:o}=e,{error:a}=yield R(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:s,type:i,options:o}=e,{data:a,error:c}=yield R(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new Ge("You must provide either an email or phone number and a type")}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return h(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return this._useSession(e=>h(this,null,function*(){return e}))}))})}_acquireLock(e,r){return h(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=h(this,null,function*(){return yield s,yield r()});return this.pendingInLock.push(h(this,null,function*(){try{yield i}catch{}})),i}return yield this.lock(`lock:${this.storageKey}`,e,()=>h(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let s=r();for(this.pendingInLock.push(h(this,null,function*(){try{yield s}catch{}})),yield s;this.pendingInLock.length;){let i=[...this.pendingInLock];yield Promise.all(i),this.pendingInLock.splice(0,i.length)}return yield s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return h(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield e(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return h(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,r=yield wr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};let{session:i,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return h(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,this._acquireLock(-1,()=>h(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return h(this,null,function*(){try{return e?yield R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ue}):yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield R(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ue})}))}catch(r){if(b(r))return{data:{user:null},error:r};throw r}})}updateUser(s){return h(this,arguments,function*(e,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._updateUser(e,r)}))})}_updateUser(s){return h(this,arguments,function*(e,r={}){try{return yield this._useSession(i=>h(this,null,function*(){let{data:o,error:a}=i;if(a)throw a;if(!o.session)throw new _e;let c=o.session,l=null,u=null;if(this.flowType==="pkce"&&e.email!=null){let f=He();yield Ie(this.storage,`${this.storageKey}-code-verifier`,f),l=yield Ve(f),u=f===l?"plain":"s256"}let{data:d,error:p}=yield R(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:c.access_token,xform:ue});if(p)throw p;return c.user=d.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(i){if(b(i))return{data:{user:null},error:i};throw i}})}_decodeJWT(e){return ii(e)}setSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return h(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new _e;let r=Date.now()/1e3,s=r,i=!0,o=null,a=ii(e.access_token);if(a.exp&&(s=a.exp,i=s<=r),i){let{session:c,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(b(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(e){return h(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;if(!e){let{data:a,error:c}=r;if(c)throw c;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new _e;let{session:i,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(e){return h(this,null,function*(){try{if(!re())throw new We("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new We("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new br("Not a valid PKCE flow url.");let r=An(window.location.href);if(e){if(!r.code)throw new br("No code detected.");let{data:F,error:Z}=yield this._exchangeCodeForSession(r.code);if(Z)throw Z;let he=new URL(window.location.href);return he.searchParams.delete("code"),window.history.replaceState(window.history.state,"",he.toString()),{data:{session:F.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new We(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});let{provider_token:s,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=r;if(!o||!c||!a||!u)throw new We("No session defined in URL");let d=Math.round(Date.now()/1e3),p=parseInt(c),f=d+p;l&&(f=parseInt(l));let v=f-d;v*1e3<=Rr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);let S=f-p;d-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,f,d):d-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",S,f,d);let{data:w,error:k}=yield this._getUser(o);if(k)throw k;let Y={provider_token:s,provider_refresh_token:i,access_token:o,expires_in:p,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Y,redirectType:r.type},error:null}}catch(r){if(b(r))return{data:{session:null,redirectType:null},error:r};throw r}})}_isImplicitGrantFlow(){let e=An(window.location.href);return!!(re()&&(e.access_token||e.error_description))}_isPKCEFlow(){return h(this,null,function*(){let e=An(window.location.href),r=yield wr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)})}signOut(){return h(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return h(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{error:o};let a=(s=i.session)===null||s===void 0?void 0:s.access_token;if(a){let{error:c}=yield this.admin.signOut(a,e);if(c&&!(yc(c)&&(c.status===404||c.status===401)))return{error:c}}return e!=="others"&&(yield this._removeSession(),yield In(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))})}onAuthStateChange(e){let r=pc(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),h(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:s}}}_emitInitialSession(e){return h(this,null,function*(){return yield this._useSession(r=>h(this,null,function*(){var s,i;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(s){return h(this,arguments,function*(e,r={}){let i=null,o=null;if(this.flowType==="pkce"){let a=He();yield Ie(this.storage,`${this.storageKey}-code-verifier`,`${a}/PASSWORD_RECOVERY`),i=yield Ve(a),o=a===i?"plain":"s256"}try{return yield R(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(b(a))return{data:null,error:a};throw a}})}getUserIdentities(){return h(this,null,function*(){var e;try{let{data:r,error:s}=yield this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(b(r))return{data:null,error:r};throw r}})}linkIdentity(e){return h(this,null,function*(){var r;try{let{data:s,error:i}=yield this._useSession(o=>h(this,null,function*(){var a,c,l,u,d;let{data:p,error:f}=o;if(f)throw f;let v=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield R(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})}));if(i)throw i;return re()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:e.provider,url:s?.url},error:null}}catch(s){if(b(s))return{data:{provider:e.provider,url:null},error:s};throw s}})}unlinkIdentity(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)throw a;return yield R(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})}))}catch(r){if(b(r))return{data:null,error:r};throw r}})}_refreshAccessToken(e){return h(this,null,function*(){let r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{let s=Date.now();return yield vc(i=>h(this,null,function*(){return yield mc(i*200),this._debug(r,"refreshing attempt",i),yield R(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ke})}),(i,o,a)=>a&&a.error&&Pn(a.error)&&Date.now()+(i+1)*200-s<Rr)}catch(s){if(this._debug(r,"error",s),b(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,r){return h(this,null,function*(){let s=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),re()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}})}_recoverAndRefresh(){return h(this,null,function*(){var e;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let s=yield wr(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&(yield this._removeSession());return}let i=Math.round(Date.now()/1e3),o=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<i+ai;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ai}s`),o){if(this.autoRefreshToken&&s.refresh_token){let{error:a}=yield this._callRefreshToken(s.refresh_token);a&&(console.error(a),Pn(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}})}_callRefreshToken(e){return h(this,null,function*(){var r,s;if(!e)throw new _e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new yr;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new _e;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(i,"error",o),b(o)){let a={session:null,error:o};return Pn(o)||(yield this._removeSession(),yield this._notifyAllSubscribers("SIGNED_OUT",null)),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}})}_notifyAllSubscribers(e,r,s=!0){return h(this,null,function*(){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>h(this,null,function*(){try{yield c.callback(e,r)}catch(l){o.push(l)}}));if(yield Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(i,"end")}})}_saveSession(e){return h(this,null,function*(){this._debug("#_saveSession()",e),yield Ie(this.storage,this.storageKey,e)})}_removeSession(){return h(this,null,function*(){this._debug("#_removeSession()"),yield In(this.storage,this.storageKey)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&re()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return h(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),Rr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>h(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return h(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return h(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return h(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>h(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(r=>h(this,null,function*(){let{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let i=Math.floor((s.expires_at*1e3-e)/Rr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Rr}ms, refresh threshold is ${Oc} ticks`),i<=Oc&&(yield this._callRefreshToken(s.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Mn)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return h(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!re()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>h(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return h(this,null,function*(){let r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>h(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,r,s){return h(this,null,function*(){let i=[`provider=${encodeURIComponent(r)}`];if(s?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){let o=He();yield Ie(this.storage,`${this.storageKey}-code-verifier`,o);let a=yield Ve(o),c=o===a?"plain":"s256";this._debug("PKCE","code verifier",`${o.substring(0,5)}...`,"code challenge",a,"method",c);let l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(l.toString())}if(s?.queryParams){let o=new URLSearchParams(s.queryParams);i.push(o.toString())}return s?.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`})}_unenroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield R(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(b(r))return{data:null,error:r};throw r}})}_enroll(e){return h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s,i;let{data:o,error:a}=r;if(a)return{data:null,error:a};let{data:c,error:l}=yield R(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(!((i=c?.totp)===null||i===void 0)&&i.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(r){if(b(r))return{data:null,error:r};throw r}})}_verify(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:c}=yield R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(b(r))return{data:null,error:r};throw r}}))})}_challenge(e){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){try{return yield this._useSession(r=>h(this,null,function*(){var s;let{data:i,error:o}=r;return o?{data:null,error:o}:yield R(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=i?.session)===null||s===void 0?void 0:s.access_token})}))}catch(r){if(b(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(e){return h(this,null,function*(){let{data:r,error:s}=yield this._challenge({factorId:e.factorId});return s?{data:null,error:s}:yield this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})})}_listFactors(){return h(this,null,function*(){let{data:{user:e},error:r}=yield this.getUser();if(r)return{data:null,error:r};let s=e?.factors||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:s,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){return h(this,null,function*(){return this._acquireLock(-1,()=>h(this,null,function*(){return yield this._useSession(e=>h(this,null,function*(){var r,s;let{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(i.access_token),c=null;a.aal&&(c=a.aal);let l=c;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");let d=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}))})}}return n.nextInstanceID=0,n})();var Nh=li,ui=Nh;var jn=class extends ui{constructor(t){super(t)}};var Uh=function(n,t,e,r){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(n,t||[])).next())})},Nn=class{constructor(t,e,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=hc(t),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);let l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:ac,realtime:lc,auth:Object.assign(Object.assign({},cc),{storageKey:l}),global:oc},d=dc(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=uc(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Ha(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new sr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new mr(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Uh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){let d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jn({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new pr(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r?.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Ic=(n,t,e)=>new Nn(n,t,e);var hi={production:!1,supabaseUrl:"https://qpxpavknunjnobazzjnj.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFweHBhdmtudW5qbm9iYXp6am5qIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MDY5MzI2MSwiZXhwIjoyMDY2MjY5MjYxfQ.HACKEvpnbK7jPyeU_ITmOBwVAALLWkuQ5mCB77gZokk"};var kc=class n{supabase;router=m(K);_ngZone=m(ne);constructor(){this.supabase=Ic(hi.supabaseUrl,hi.supabaseKey),this.supabase.auth.onAuthStateChange((t,e)=>{localStorage.setItem("session",JSON.stringify(e?.user)),e?.user&&this._ngZone.run(()=>{this.router.navigate(["/dashboard"])})})}get isLoggedIn(){return localStorage.getItem("session")!=="undefined"}signInWithGoogle(){return h(this,null,function*(){yield this.supabase.auth.signInWithOAuth({provider:"google"})})}signInWithEmail(t){return h(this,null,function*(){return yield this.supabase.auth.signInWithPassword({email:t.email,password:t.password})})}signUpWithEmail(t,e,r){return h(this,null,function*(){let s=e??!1,i=r??!1,o=yield this.supabase.auth.signUp({email:t.email,password:t.password,options:{data:{displayName:t.name}}});return o.error||!o.data.user?o:yield this.supabase.from("users").update({admin:e,reader:r}).eq("id",o.data.user.id)})}signOut(){return h(this,null,function*(){yield this.supabase.auth.signOut()})}getCurrentUserId(){return h(this,null,function*(){let{data:t,error:e}=yield this.supabase.auth.getUser();return e||!t.user?"":t.user.id})}getUserInfo(t){return this.supabase.from("users").select("*, teams(id, name)").eq("id",t).single()}getUserTeamId(t){return this.supabase.from("teams").select().eq("id",t).single()}getTeams(){return this.supabase.from("teams").select("*")}updateUser(t,e,r,s){return this.supabase.from("users").update({full_name:e,phone:r,team:s}).eq("id",t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};export{Wc as a,ol as b,cl as c,ce as d,Ds as e,K as f,va as g,Fu as h,Bu as i,Ic as j,hi as k,kc as l};
