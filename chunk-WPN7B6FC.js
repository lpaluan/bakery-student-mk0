import{A as C,B as N,C as x,D as U,E,F as O,G as T,H as w,I as G,J as j,K as B,L as D,M as P,N as k,p as y,q as _,y as M,z as S}from"./chunk-YXGIB4SI.js";import{Aa as i,Ba as o,Ca as p,Fa as f,Fb as F,L as u,Ta as n,Va as h,fa as a,ja as d,ma as c,qa as g,qb as I,sb as b,za as m,zb as v}from"./chunk-D4BNZR4D.js";import{f as s}from"./chunk-PZ5UXJ7I.js";function R(l,e){if(l&1&&(i(0,"mat-option",11),n(1),o()),l&2){let t=e.$implicit;m("value",t.id),a(),h(" ",t.name," ")}}var A=class l{constructor(e){this.fb=e}imagePath="assets/images/logo-piacenza-young.jpeg";router=u(v);auth=u(F);userInfoForm;userId="";teams=[];ngOnInit(){return s(this,null,function*(){this.userInfoForm=this.fb.group({full_name:[""],phone:[""],team:[""]}),this.loadTeams(),this.loadUserInfo()})}loadUserInfo(){return s(this,null,function*(){this.userId=yield this.auth.getCurrentUserId();let{data:e,error:t}=yield this.auth.getUserInfo(this.userId);this.userInfoForm.patchValue({full_name:e?.full_name,phone:e?.phone,team:e?.team})})}loadTeams(){return s(this,null,function*(){let{data:e,error:t}=yield this.auth.getTeams();t||(this.teams=e)})}onSubmit(){return s(this,null,function*(){let{error:e}=yield this.auth.updateUser(this.userId,this.userInfoForm.value.full_name,this.userInfoForm.value.phone,this.userInfoForm.value.team);e?alert("Error updating profile"):this.router.navigate(["/dashboard"])})}onCancel(){this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||l)(d(E))};static \u0275cmp=c({type:l,selectors:[["app-user-info"]],decls:20,vars:4,consts:[[1,"container"],[1,"form-container",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","full_name"],["matInput","","formControlName","phone","type","tel"],["appearance","outline","mandatory","true",1,"full-width"],["formControlName","team"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center","button-group"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(t,r){t&1&&(i(0,"div",0)(1,"form",1),f("ngSubmit",function(){return r.onSubmit()}),i(2,"mat-form-field",2)(3,"mat-label"),n(4,"Nominativo"),o(),p(5,"input",3),o(),i(6,"mat-form-field",2)(7,"mat-label"),n(8,"Telefono"),o(),p(9,"input",4),o(),i(10,"mat-form-field",5)(11,"mat-label"),n(12,"Team"),o(),i(13,"mat-select",6),g(14,R,2,2,"mat-option",7),o()(),i(15,"div",8)(16,"button",9),f("click",function(){return r.onCancel()}),n(17," Annulla "),o(),i(18,"button",10),n(19," Conferma "),o()()()()),t&2&&(a(),m("formGroup",r.userInfoForm),a(13),m("ngForOf",r.teams),a(2),m("disabled",r.userInfoForm.invalid),a(2),m("disabled",r.userInfoForm.invalid))},dependencies:[b,I,O,N,M,S,C,x,U,G,w,T,B,j,_,y,k,P,D],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;max-width:400px;margin:0 auto;padding:24px}.button-group[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:content-distributed;gap:12px}"]})};export{A as a};
