import{a as w,b as j,c as G,d as B,e as D,f as P,g as k,h as A}from"./chunk-6WXLWC7V.js";import{y as _,z as M}from"./chunk-LGMIWWJW.js";import{a as S,d as C,e as N,h as U,i as x,j as E,l as O,n as T}from"./chunk-LCRW35TE.js";import{e as y,k as F}from"./chunk-5BM647UK.js";import"./chunk-LJ5XHLMQ.js";import{Ib as m,Ka as d,Kb as I,Na as r,Sa as c,Z as p,Za as g,bb as h,ob as a,pb as o,qb as t,rb as u,rc as v,tc as b,ub as f}from"./chunk-4VNBAIG5.js";import{h as s}from"./chunk-FK42CRUA.js";function L(l,e){if(l&1&&(o(0,"mat-option",13),m(1),t()),l&2){let i=e.$implicit;a("value",i.id),r(),I(" ",i.name," ")}}var V=class l{constructor(e){this.fb=e}imagePath="assets/images/logo-piacenza-young.jpeg";router=p(y);auth=p(F);userInfoForm;userId="";teams=[];ngOnInit(){return s(this,null,function*(){this.userInfoForm=this.fb.group({full_name:[""],phone:[""],team:[""]}),this.loadTeams(),this.loadUserInfo()})}loadUserInfo(){return s(this,null,function*(){this.userId=yield this.auth.getCurrentUserId();let{data:e,error:i}=yield this.auth.getUserInfo(this.userId);this.userInfoForm.patchValue({full_name:e?.full_name,phone:e?.phone,team:e?.team})})}loadTeams(){return s(this,null,function*(){let{data:e,error:i}=yield this.auth.getTeams();i||(this.teams=e)})}onSubmit(){return s(this,null,function*(){let{error:e}=yield this.auth.updateUser(this.userId,this.userInfoForm.value.full_name,this.userInfoForm.value.phone,this.userInfoForm.value.team);e?alert("Error updating profile"):this.router.navigate(["/dashboard"])})}onCancel(){this.router.navigate(["/dashboard"])}static \u0275fac=function(i){return new(i||l)(c(O))};static \u0275cmp=g({type:l,selectors:[["app-user-info"]],decls:22,vars:5,consts:[[1,"container"],[1,"d-flex","justify-content-center"],["alt","Logo",1,"logo","img-fluid",3,"src"],[1,"form-container",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","full_name"],["matInput","","formControlName","phone","type","tel"],["appearance","outline","mandatory","true",1,"full-width"],["formControlName","team"],[3,"value",4,"ngFor","ngForOf"],[1,"justify-content-center","button-group"],["mat-raised-button","","color","primary","type","button",3,"click","disabled"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(i,n){i&1&&(o(0,"div",0)(1,"div",1),u(2,"img",2),t(),o(3,"form",3),f("ngSubmit",function(){return n.onSubmit()}),o(4,"mat-form-field",4)(5,"mat-label"),m(6,"Nominativo"),t(),u(7,"input",5),t(),o(8,"mat-form-field",4)(9,"mat-label"),m(10,"Telefono"),t(),u(11,"input",6),t(),o(12,"mat-form-field",7)(13,"mat-label"),m(14,"Team"),t(),o(15,"mat-select",8),h(16,L,2,2,"mat-option",9),t()(),o(17,"div",10)(18,"button",11),f("click",function(){return n.onCancel()}),m(19," Annulla "),t(),o(20,"button",12),m(21," Conferma "),t()()()()),i&2&&(r(2),a("src",n.imagePath,d),r(),a("formGroup",n.userInfoForm),r(13),a("ngForOf",n.teams),r(2),a("disabled",n.userInfoForm.invalid),r(2),a("disabled",n.userInfoForm.invalid))},dependencies:[b,v,T,U,S,C,N,x,E,G,j,w,D,B,M,_,A,k,P],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;max-width:400px;margin:0 auto;padding:24px}.button-group[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:content-distributed;gap:12px}"]})};export{V as UserInfo};
